{"title":"Camunda 工作流","slug":"Camunda-工作流","date":"2024-01-19T04:09:28.000Z","updated":"2024-07-12T07:43:37.640Z","comments":true,"path":"api/articles/Camunda-工作流.json","realPath":null,"excerpt":null,"covers":["/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda1.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda2.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda3.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda4.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda5.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda6.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda7.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda8.jpg","/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda9.jpg"],"cover":null,"content":"<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"一、Camunda教程\"><a href=\"#一、Camunda教程\" class=\"headerlink\" title=\"一、Camunda教程\"></a>一、Camunda教程</h1><p><a href=\"https://zhuanlan.zhihu.com/p/586479914\">请点击此处</a>；<br><a href=\"https://zhuanlan.zhihu.com/p/642365050\">比上面还详细的教程</a>。</p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"二、生成的数据表说明\"><a href=\"#二、生成的数据表说明\" class=\"headerlink\" title=\"二、生成的数据表说明\"></a>二、生成的数据表说明</h1><p>一、总介绍<br>1、<code>act_re_*</code>：<code>re</code>表示流程资源存储，这个前缀的表包含了流程定义和流程静态资源（图片，规则等），共5张表。<br>2、<code>act_ru_*</code>：<code>ru</code>表示流程运行时。 这些运行时的表，包含流程实例，任务，变量，Job等运行中的数据。 Camunda只在流程实例执行过程中保存这些数据，在流程结束时就会删除这些记录， 这样运行时表的数据量最小，可以最快运行。共15张表。<br>3、<code>act_id_*</code>：<code>id</code>表示组织用户信息，比如用户，组等，共6张表。<br>4、<code>act_hi_*</code>：<code>hi</code>表示流程历史记录。 这些表包含历史数据，比如历史流程实例，变量，任务等，共18张表。<br>5、<code>act_ge_*</code>：<code>ge</code>表示流程通用数据， 用于不同场景下，共3张表。<br>二、每个表介绍<br>1、流程资源存储类<br>（1）<code>act_re_case_def</code>：CMMN案例管理模型定义表<br>（2）<code>act_re_decision_def</code>：DMN决策模型定义表<br>（3）<code>act_re_decision_req_def</code>：决策需求定义表<br>（4）<code>act_re_deployment</code>：流程部署表<br>（5）<code>act_re_procdef</code>：BPMN流程模型定义表<br>2、流程运行类<br>（1）<code>act_ru_authorization</code>：流程运行时权限授予的表（是否使用与是否开启”camunda.bpm.authorization.enabled” ： “true”  or  “false”有关）<br>（2）<code>act_ru_batch</code>：流程执行批处理表<br>（3）<code>act_ru_case_execution</code>：CMMN案例运行执行表<br>（4）<code>act_ru_case_sentry_part</code>：CMMN案例运行时哨兵部分表<br>（5）<code>act_ru_event_subscr</code>：流程事件订阅表<br>（6）<code>act_ru_execution</code>：BPMN流程运行时记录表（运行时流程执行实例表，与流程实例并不一样）<br>（7）<code>act_ru_ext_task</code>：流程任务消息执行表（运行时外部任务信息表）<br>（8）<code>act_ru_filter</code>：流程定义查询配置表（运行时过滤器表）<br>（9）<code>act_ru_identitylink</code>：运行时流程人员表<br>（10）<code>act_ru_incident</code>：运行时异常事件表（工作流引擎突发事件表）<br>（11）<code>act_ru_job</code>：流程运行时作业表<br>（12）<code>act_ru_jobdef</code>：流程作业定义表<br>（13）<code>act_ru_meter_log</code>：流程运行时度量日志表<br>（14）<code>act_ru_task</code>：流程运行时任务表（最常用的表之一，每一个流程实例开启后，到达的每一个task都会生成在这里，也就是任务实例）<br>（15）<code>act_ru_variable</code>：流程运行时变量表（在开启流程实例或者在流程推进时传入的参数，在流程未结束前，都会存储在这里，但是并不是每个节点的变量变化都在这里，比如一个布尔值的confirm如果多次传入，这里也只会存在一个confirm，但是在act_hi_detail表中会有每个节点中confirm变化的值）<br>3、用户信息类<br>（1）<code>act_id_group</code>：审批组信息表<br>（2）<code>act_id_info</code>：用户扩展信息表<br>（3）<code>act_id_membership</code>：用户和审批组之间的关系的表<br>（4）<code>act_id_tenant</code>：租户信息表<br>（5）<code>act_id_tenant_member</code>：用户租户关系表<br>（6）<code>act_id_user</code>：用户信息表<br>4、流程历史记录类<br>（1）<code>act_hi_actinst</code>：历史的活动实例表<br>（2）<code>act_hi_attachment</code>：历史的流程附件表<br>（3）<code>act_hi_batch</code>：历史的批处理记录表<br>（4）<code>act_hi_caseactinst</code>：历史的CMMN活动实例表<br>（5）<code>act_hi_caseinst</code>：历史的CMMN实例表<br>（6）<code>act_hi_comment</code>：历史的流程审批意见表<br>（7）<code>act_hi_dec_in</code>：历史的DMN变量输入表<br>（8）<code>act_hi_dec_out</code>：历史的DMN变量输出表<br>（9）<code>act_hi_decinst</code>：历史的DMN实例表，包含有关决策的单个评估的信息，包括输入和输出值<br>（10）<code>act_hi_detail</code>：历史的流程运行时变量详情记录表<br>（11）<code>act_hi_ext_task_log</code>：历史的流程任务消息执行表<br>（12）<code>act_hi_identitylink</code>：历史的流程运行过程中用户关系<br>（13）<code>act_hi_incident</code>：历史的流程异常事件记录表<br>（14）<code>act_hi_job_log</code>：历史的流程作业记录表<br>（15）<code>act_hi_op_log</code>：历史的用户操作记录表，包含有关用户执行的操作的信息的日志条目，这用于记录操作，如创建新任务、完成任务等<br>（16）<code>act_hi_procinst</code>：历史的流程实例<br>（17）<code>act_hi_taskinst</code>：历史的任务实例<br>（18）<code>act_hi_varinst</code>：历史的流程变量记录表<br>5、流程通用数据类<br>（1）<code>act_ge_bytearray</code>：流程引擎二进制数据表<br>（2）<code>act_ge_property</code>：流程引擎属性配置表<br>（3）<code>act_ge_schema_log</code>：数据库脚本执行日志表  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"三、每个表中字段说明\"><a href=\"#三、每个表中字段说明\" class=\"headerlink\" title=\"三、每个表中字段说明\"></a>三、每个表中字段说明</h1><h3 id=\"1、act-ge-bytearray（流程引擎二进制数据表）\"><a href=\"#1、act-ge-bytearray（流程引擎二进制数据表）\" class=\"headerlink\" title=\"1、act_ge_bytearray（流程引擎二进制数据表）\"></a>1、act_ge_bytearray（流程引擎二进制数据表）</h3><p>1、<code>id</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>name_</code>：名称<br>4、<code>deployment_id_</code>：部署id<br>5、<code>bytes_</code>：字节内容<br>6、<code>generated_</code>：是否系统生成（0用户创建，null系统创建）<br>7、<code>tenant_id_</code>：租户id<br>8、<code>type_</code>：类型<br>9、<code>create_time_</code>：创建时间<br>10、<code>root_proc_inst_id_</code>：流程实例根id<br>11、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"2、act-ge-property（流程引擎属性配置表）\"><a href=\"#2、act-ge-property（流程引擎属性配置表）\" class=\"headerlink\" title=\"2、act_ge_property（流程引擎属性配置表）\"></a>2、act_ge_property（流程引擎属性配置表）</h3><p>1、<code>name_</code>：名称<br>2、<code>value_</code>：值<br>3、<code>rev_</code>：版本  </p>\n<h3 id=\"3、act-ge-schema-log（数据库脚本执行日志表）\"><a href=\"#3、act-ge-schema-log（数据库脚本执行日志表）\" class=\"headerlink\" title=\"3、act_ge_schema_log（数据库脚本执行日志表）\"></a>3、act_ge_schema_log（数据库脚本执行日志表）</h3><p>1、<code>id_</code>：主键<br>2、<code>timestamp_</code>：时间戳<br>3、<code>version_</code>：版本  </p>\n<h3 id=\"4、act-hi-actinst（历史的活动实例表）\"><a href=\"#4、act-hi-actinst（历史的活动实例表）\" class=\"headerlink\" title=\"4、act_hi_actinst（历史的活动实例表）\"></a>4、act_hi_actinst（历史的活动实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>parent_act_inst_id_</code>：父节点实例id<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：执行实例id<br>8、<code>act_id_</code>：节点id<br>9、<code>task_id_</code>：任务id<br>10、<code>call_proc_inst_id_</code>：调用外部的流程实例id<br>11、<code>call_case_inst_id_</code>：调用外部的案例实例id<br>12、<code>act_name_</code>：节点名称<br>13、<code>acr_type_</code>：节点类型<br>14、<code>assignee_</code>：办理人<br>15、<code>start_time_</code>：开始时间<br>16、<code>end_time_</code>：结束时间<br>17、<code>duration_</code>：耗时<br>18、<code>act_inst_state_</code>：活动实例状态<br>19、<code>sequence_counter_</code>：序列计数器<br>20、<code>tenant_id_</code>：租户id<br>21、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"5、act-hi-comment（历史流程审批意见表）\"><a href=\"#5、act-hi-comment（历史流程审批意见表）\" class=\"headerlink\" title=\"5、act_hi_comment（历史流程审批意见表）\"></a>5、act_hi_comment（历史流程审批意见表）</h3><p>1、<code>id_</code>：主键<br>2、<code>type_</code>：类型<br>3、<code>time_</code>：时间<br>4、<code>user_id_</code>：处理人id<br>5、<code>task_id_</code>：任务id<br>6、<code>root_proc_inst_id_</code>：流程实例根id<br>7、<code>proc_inst_id_</code>：流程实例id<br>8、<code>action_</code>：行为类型<br>9、<code>messages_</code>：基本内容<br>10、<code>full_msg_</code>：全部内容<br>11、<code>tenant_id_</code>：租户id<br>12、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"6、act-hi-detail（历史的流程运行详情表）\"><a href=\"#6、act-hi-detail（历史的流程运行详情表）\" class=\"headerlink\" title=\"6、act_hi_detail（历史的流程运行详情表）\"></a>6、act_hi_detail（历史的流程运行详情表）</h3><p>1、<code>id</code>：主键<br>2、<code>type_</code>：类型<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：流程执行id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>task_id_</code>：任务id<br>13、<code>act_inst_id_</code>：节点实例id<br>14、<code>var_inst_id_</code>：流程变量记录id<br>15、<code>name_</code>：名称<br>16、<code>var_type_</code>：变量类型<br>17、<code>rev_</code>：版本<br>18、<code>time_</code>：时间戳<br>19、<code>bytearray_id_</code>：二进制数据对应id<br>20、<code>double_</code>：double类型值<br>21、<code>long_</code>：long类型值<br>22、<code>text_</code>：文本类型值<br>23、<code>text2_</code>：文本类型值2<br>24、<code>sequence_counter_</code>：序列计数器<br>25、<code>tenant_id_</code>：租户id<br>26、<code>operation_id_</code>：操作id<br>27、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"7、act-hi-identitylink（历史的流程运行过程中用户表）\"><a href=\"#7、act-hi-identitylink（历史的流程运行过程中用户表）\" class=\"headerlink\" title=\"7、act_hi_identitylink（历史的流程运行过程中用户表）\"></a>7、act_hi_identitylink（历史的流程运行过程中用户表）</h3><p>1、<code>id_</code>：主键<br>2、<code>timestamp_</code>：时间戳<br>3、<code>type_</code>：类型<br>4、<code>user_id_</code>：用户id<br>5、<code>group_id_</code>：用户组id<br>6、<code>task_id_</code>：任务id<br>7、<code>root_proc_inst_id_</code>：流程实例根id<br>8、<code>proc_def_id_</code>：流程定义id<br>9、<code>operation_type_</code>：操作类型<br>10、<code>assigner_id_</code>：分配者id<br>11、<code>proc_def_key_</code>：流程定义key<br>12、<code>tenant_id_</code>：租户id<br>13、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"8、act-hi-procinst（历史的流程实例表）\"><a href=\"#8、act-hi-procinst（历史的流程实例表）\" class=\"headerlink\" title=\"8、act_hi_procinst（历史的流程实例表）\"></a>8、act_hi_procinst（历史的流程实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>business_key_</code>：业务key<br>4、<code>proc_def_key_</code>：流程定义key<br>5、<code>pro_def_id_</code>：流程定义id<br>6、<code>start_time_</code>：开始时间<br>7、<code>end_time_</code>：结束时间<br>8、<code>removal_time_</code>：删除时间<br>9、<code>duration_</code>：耗时<br>10、<code>start_user_id_</code>：启动人id<br>11、<code>start_act_id_</code>：启动节点id<br>12、<code>end_act_id_</code>：结束节点<br>13、<code>super_process_instance_id_</code>：父流程实例id<br>14、<code>root_proc_inst_id_</code>：流程实例根id<br>15、<code>super_case_instance_id_</code>：父案例实例id<br>16、<code>case_inst_id_</code>：案例实例id<br>17、<code>delete_reason_</code>：删除原因<br>18、<code>tenant_id_</code>：租户id<br>19、<code>state_</code>：状态  </p>\n<h3 id=\"9、act-hi-taskinst（历史的任务实例表）\"><a href=\"#9、act-hi-taskinst（历史的任务实例表）\" class=\"headerlink\" title=\"9、act_hi_taskinst（历史的任务实例表）\"></a>9、act_hi_taskinst（历史的任务实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>task_def_key_</code>：任务定义key<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：流程执行id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>act_inst_id_</code>：节点实例id<br>13、<code>name_</code>：名称<br>14、<code>parent_task_id_</code>：父任务id<br>15、<code>description_</code>：描述<br>16、<code>owner_</code>：委托人id<br>17、<code>assignee_</code>：办理人id<br>18、<code>start_time_</code>：开始时间<br>19、<code>end_time_</code>：结束时间<br>20、<code>duration_</code>：耗时<br>21、<code>delete_reason_</code>：删除原因<br>22、<code>priority_</code>：优先级<br>23、<code>due_date_</code>：超时时间<br>24、<code>follow_up_date_</code>：跟踪时间<br>25、<code>tenant_id_</code>：租户id<br>26、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"10、act-hi-varinst（历史的流程变量表）\"><a href=\"#10、act-hi-varinst（历史的流程变量表）\" class=\"headerlink\" title=\"10、act_hi_varinst（历史的流程变量表）\"></a>10、act_hi_varinst（历史的流程变量表）</h3><p>1、<code>id_</code>：主键<br>2、<code>proc_def_key_</code>：流程定义key<br>3、<code>proc_def_id_</code>：流程定义id<br>4、<code>root_proc_inst_id_</code>：流程实例根id<br>5、<code>proc_inst_id</code>：流程实例id<br>6、<code>execution_id_</code>：流程执行id<br>7、<code>act_inst_id</code>：节点实例id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>task_id_</code>：任务id<br>13、<code>name_</code>：名称<br>14、<code>var_type_</code>：变量类型<br>15、<code>create_time_</code>：创建时间<br>16、<code>rev_</code>：版本<br>17、<code>bytearrary_id_</code>：二进制数据id<br>18、<code>double_</code>：double类型值<br>19、<code>long_</code>：long类型值<br>20、<code>text_</code>：文本类型值<br>21、<code>text2_</code>：文本类型值2<br>22、<code>tenant_id_</code>：租户id<br>23、<code>state_</code>：状态<br>24、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"11、act-id-user（用户表）\"><a href=\"#11、act-id-user（用户表）\" class=\"headerlink\" title=\"11、act_id_user（用户表）\"></a>11、act_id_user（用户表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>first_</code>：姓<br>4、<code>last_</code>：名<br>5、<code>emall_</code>：邮件<br>6、<code>pwd_</code>：密码<br>7、<code>salt_</code>：盐值<br>8、<code>lock_exp_time_</code>：锁定过期时间<br>9、<code>attempts_</code>：尝试次数<br>10、<code>picture_id_</code>：图片id  </p>\n<h3 id=\"12、act-id-group（群组表）\"><a href=\"#12、act-id-group（群组表）\" class=\"headerlink\" title=\"12、act_id_group（群组表）\"></a>12、act_id_group（群组表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>name_</code>：组名称<br>4、<code>type_</code>：组类型（SYSTEM系统、WORKFLOW业务）  </p>\n<h3 id=\"13、act-id-membership（用户与群组关系表）\"><a href=\"#13、act-id-membership（用户与群组关系表）\" class=\"headerlink\" title=\"13、act_id_membership（用户与群组关系表）\"></a>13、act_id_membership（用户与群组关系表）</h3><p>1、<code>user_id_</code>：用户id<br>2、<code>group_id_</code>：组id  </p>\n<h3 id=\"14、act-re-deployment（流程部署表）\"><a href=\"#14、act-re-deployment（流程部署表）\" class=\"headerlink\" title=\"14、act_re_deployment（流程部署表）\"></a>14、act_re_deployment（流程部署表）</h3><p>1、<code>id_</code>：主键<br>2、<code>name_</code>：流程名称<br>3、<code>deploy_time_</code>：部署时间<br>4、<code>source_</code>：来源<br>5、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"15、act-re-procdef（流程定义表）\"><a href=\"#15、act-re-procdef（流程定义表）\" class=\"headerlink\" title=\"15、act_re_procdef（流程定义表）\"></a>15、act_re_procdef（流程定义表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>category_</code>：流程定义的Namespace分类<br>4、<code>name_</code>：流程定义名称<br>5、<code>key_</code>：流程定义key<br>6、<code>version_</code>：流程定义版本号<br>7、<code>deployment_id_</code>：部署id<br>8、<code>resource_name_</code>：资源名称<br>9、<code>dgrm_resource_name_</code>：gram资源名称<br>10、<code>has_start_form_key_</code>：是否有启动表单<br>11、<code>suspension_state_</code>：流程挂起<br>12、<code>tenant_id_</code>：租户id<br>13、<code>version_tag_</code>：版本标签<br>14、<code>startable_</code>：是否是可启动流程  </p>\n<h3 id=\"16、act-ru-event-subscr（流程事件订阅表）\"><a href=\"#16、act-ru-event-subscr（流程事件订阅表）\" class=\"headerlink\" title=\"16、act_ru_event_subscr（流程事件订阅表）\"></a>16、act_ru_event_subscr（流程事件订阅表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>event_type_</code>：事件类型<br>4、<code>event_name_</code>：事件名称<br>5、<code>execution_id_</code>：执行id<br>6、<code>pro_inst_id</code>：流程实例id<br>7、<code>activity_id_</code>：节点id<br>8、<code>configuration_</code>：配置<br>9、<code>created_</code>：创建时间<br>10、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"17、act-ru-execution（流程运行时表）\"><a href=\"#17、act-ru-execution（流程运行时表）\" class=\"headerlink\" title=\"17、act_ru_execution（流程运行时表）\"></a>17、act_ru_execution（流程运行时表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>root_proc_inst_id_</code>：流程实例根id<br>4、<code>proc_inst_id_</code>：流程实例id<br>5、<code>business_key_</code>：业务key<br>6、<code>parent_id_</code>：流程父实例id<br>7、<code>proc_def_id_</code>：流程定义id<br>8、<code>super_exec_</code>：父流程实例对应的执行<br>9、<code>super_case_exec_</code>：父案例实例对应的执行<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>act_id_</code>：节点id<br>12、<code>act_inst_id</code>：节点实例id<br>13、<code>is_active_</code>：是否激活<br>14、<code>is_concurrent_</code>：是否并行<br>15、<code>is_scope_</code>：是否多实例范围<br>16、<code>is_event_scope_</code>：是否事件多实例范围<br>17、<code>suspension_state_</code>：挂起状态<br>18、<code>cached_ent_state_</code>：缓存状态<br>19、<code>sequence_counter_</code>：序列计数器<br>20、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"18、act-ru-identitylink（流程运行时表）\"><a href=\"#18、act-ru-identitylink（流程运行时表）\" class=\"headerlink\" title=\"18、act_ru_identitylink（流程运行时表）\"></a>18、act_ru_identitylink（流程运行时表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>group_id_</code>：用户组id<br>4、<code>type_</code>：类型<br>5、<code>user_id_</code>：用户id<br>6、<code>task_id_</code>：任务id<br>7、<code>proc_def_id_</code>：流程定义id<br>8、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"19、act-ru-incident（-运行时异常记录表）\"><a href=\"#19、act-ru-incident（-运行时异常记录表）\" class=\"headerlink\" title=\"19、act_ru_incident（ 运行时异常记录表）\"></a>19、act_ru_incident（ 运行时异常记录表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>incident_timestamp_</code>：事件时间戳<br>4、<code>incident_msg_</code>：事件信息<br>5、<code>incident_type_</code>：事件类型<br>6、<code>execution_id_</code>：流程执行id<br>7、<code>activity_id_</code>：节点id<br>8、<code>proc_inst_id_</code>：流程实例id<br>9、<code>proc_def_id_</code>：流程定义id<br>10、<code>cause_incident_id_</code>：事件原因id<br>11、<code>root_cause_incident_id_</code>：事件原因根id<br>12、<code>configuration_</code>：事件配置<br>13、<code>tenant_id_</code>：租户id<br>14、<code>job_def_id_</code>：job定义id  </p>\n<h3 id=\"20、act-ru-job（-流程运行时作业表）\"><a href=\"#20、act-ru-job（-流程运行时作业表）\" class=\"headerlink\" title=\"20、act_ru_job（ 流程运行时作业表）\"></a>20、act_ru_job（ 流程运行时作业表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>type_</code>：类型<br>4、<code>lock_exp_time_</code>：锁定过期时间<br>5、<code>lock_owner_</code>：锁定用户<br>6、<code>exclusive_</code>：独占标识<br>7、<code>execution_id_</code>：执行id<br>8、<code>process_instance_id_</code>：流程实例id<br>9、<code>process_def_id_</code>：流程定义id<br>10、<code>process_def_key_</code>：流程定义key<br>11、<code>retries_</code>：重试次数<br>12、<code>exception_stack_id_</code>：异常堆栈id<br>13、<code>exception_msg_</code>：异常信息<br>14、<code>duedate_</code>：截止时间<br>15、<code>repeat_</code>：重复<br>16、<code>handler_type_</code>：处理类型<br>17、<code>handler_cfg_</code>：处理配置<br>18、<code>deployment_id_</code>：部署id<br>19、<code>suspension_state_</code>：挂起状态<br>20、<code>job_def_id_</code>：作业定义id<br>21、<code>priority_</code>：作业优先级<br>22、<code>sequence_counter_</code>：序列计数器<br>23、<code>tenant_id</code>：租户id<br>24、<code>create_time_</code>：创建时间  </p>\n<h3 id=\"21、act-ru-jobdef（-流程作业定义表）\"><a href=\"#21、act-ru-jobdef（-流程作业定义表）\" class=\"headerlink\" title=\"21、act_ru_jobdef（ 流程作业定义表）\"></a>21、act_ru_jobdef（ 流程作业定义表）</h3><p>1、<code>job_type_</code>：job类型<br>2、<code>job_configuration_</code>：job配置<br>3、<code>suspension_state_</code>：挂起状态<br>4、<code>job_priority</code>：优先级  </p>\n<h3 id=\"22、act-ru-task（-流程运行时任务表）\"><a href=\"#22、act-ru-task（-流程运行时任务表）\" class=\"headerlink\" title=\"22、act_ru_task（ 流程运行时任务表）\"></a>22、act_ru_task（ 流程运行时任务表）</h3><p>1、<code>execution_id_</code>：流程执行id<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>proc_def_id_</code>：流程定义id<br>4、<code>case_execution_id_</code>：案例执行id<br>5、<code>case_inst_id_</code>：案例实例id<br>6、<code>case_def_id_</code>：案例定义id<br>7、<code>parent_task_id_</code>：父任务id<br>8、<code>description_</code>：描述<br>9、<code>task_def_key_</code>：任务定义key<br>10、<code>owner_</code>：委托人<br>11、<code>assignee_</code>：办理人<br>12、<code>delegation</code>：委托状态<br>13、<code>priority_</code>：优先级<br>14、<code>due_date_</code>：截止时间<br>15、<code>follow_up_date_</code>：跟踪时间<br>16、<code>suspension_state_</code>：挂起状态  </p>\n<h3 id=\"23、act-ru-variable（-流程运行时变量表）\"><a href=\"#23、act-ru-variable（-流程运行时变量表）\" class=\"headerlink\" title=\"23、act_ru_variable（ 流程运行时变量表）\"></a>23、act_ru_variable（ 流程运行时变量表）</h3><p>1、<code>execution_id_</code>：流程执行id<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>case_exrcution_id_</code>：案例执行id<br>4、<code>case_inst_id_</code>：案例实例id<br>5、<code>task_id_</code>：任务id<br>6、<code>bytearray_id_</code>：二进制内容id<br>7、<code>double_</code>：double类型值<br>8、<code>long_</code>：long类型值<br>9、<code>text_</code>：文本<br>10、<code>text2</code>：文本2<br>11、<code>var_scope_</code>：变量范围<br>12、<code>sequence_counter_</code>：序列计数器<br>13、<code>is_concurrent_local_</code>：是否并发  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"四、springboot集成camunda部署教程以及说明\"><a href=\"#四、springboot集成camunda部署教程以及说明\" class=\"headerlink\" title=\"四、springboot集成camunda部署教程以及说明\"></a>四、springboot集成camunda部署教程以及说明</h1><h3 id=\"1、步骤\"><a href=\"#1、步骤\" class=\"headerlink\" title=\"1、步骤\"></a>1、步骤</h3><p>1、创建springboot项目，并且导入依赖  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.zjy.workflow<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-springboot-testdemo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-dependencies<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bom<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.19.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  流程引擎 在Rest服务接口的依赖中有了--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;artifactId&gt;camunda-bpm-spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;version&gt;7.17.0&lt;/version&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  Rest服务接口--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-rest<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  web界面模块，就是那个驾驶舱登录界面，不需要可以不导入--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-webapp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-engine-plugin-spin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.spin<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-spin-dataformat-all<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba.fastjson2<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.0.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--mysql--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;groupId&gt;mysql&lt;/groupId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;version&gt;5.1.47&lt;/version&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--postgresql--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.postgresql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>postgresql<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.6.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2、创建application.yml</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">8088</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">application:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">camunda-springboot-testdemo</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"comment\"># postgresql</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:postgresql://192.168.126.130:5432/postgres?useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">org.postgresql.Driver</span></span><br><span class=\"line\">  <span class=\"attr\">sql:</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">always</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># mysql</span></span><br><span class=\"line\"><span class=\"comment\">#    url: jdbc:mysql://39.103.217.57:3306/camunda2?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;useOldAliasMetadataBehavior=true</span></span><br><span class=\"line\"><span class=\"comment\">#    driver-class-name: com.mysql.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"comment\">#    username: root</span></span><br><span class=\"line\"><span class=\"comment\">#    password: root</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">    <span class=\"attr\">admin-user:</span></span><br><span class=\"line\">      <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">      <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">    <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 关闭springboot继承好的自动部署功能</span></span><br></pre></td></tr></table></figure>\n<p>3、创建日志输出log4j2.xml配置文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--monitorInterval属性值（秒数）为一个非零值来让Log4j每隔指定的秒数来重新读取配置文件，可以用来动态应用Log4j配置--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Configuration</span> <span class=\"attr\">status</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">monitorInterval</span>=<span class=\"string\">&quot;30&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--用来自定义一些变量--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--变量定义--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;myPattern&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;Property name=&quot;dir_url&quot;&gt;d:/logs&lt;/Property&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--使用Appenders元素可以将日志事件数据写到各种目标位置--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Appenders</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认打印到控制台 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Console</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ConsoleAppend&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 默认打印格式 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">PatternLayout</span> <span class=\"attr\">pattern</span>=<span class=\"string\">&quot;$&#123;myPattern&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">Console</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 打印到日志文件上 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;File name=&quot;FileAppend&quot; fileName=&quot;$&#123;dir_url&#125;/fileLog.log&quot; bufferedIO=&quot;true&quot; immediateFlush=&quot;true&quot;&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;PatternLayout&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--                &lt;pattern&gt;$&#123;myPattern&#125;&lt;/pattern&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;/PatternLayout&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/File&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Appenders</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loggers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认打印日志级别为 error --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;INFO&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">AppenderRef</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;ConsoleAppend&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">AppenderRef</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;FileAppend&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">Root</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Loggers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>4、使用流程设计器，设计一个bpmn流程，并保存到resources目录下  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda1.jpg\" class=\"\">  \n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda2.jpg\" class=\"\">  \n<p>（1）预约维修节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda3.jpg\" class=\"\">  \n<p>（2）师傅上门维修节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda4.jpg\" class=\"\">  \n<p>（3）公司电话回访节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda5.jpg\" class=\"\">  \n<p>（4）查看评分节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda6.jpg\" class=\"\">  \n<p>5、创建service<br><strong>说明：</strong><br>我们创建的预约维修节点、师傅上门维修节点、公司电话回访节点和查看评分节点都是业务节点，属于业务节点<code>Implementation</code>选项的说明：如果<code>Type</code>项选择的是<code>Java Class</code>和<code>Delegate expression</code>，代码中类需要实现<code>JavaDelegate接口</code>，例子如下；如果选择的是<code>Expression</code>，不需要实现，只需先在<code>@Service</code>注解中起个别名，根据节点要求写方法，然后在<code>bpmn</code>中将别名和方法填入<code>Expression</code>选项中（格式：#{别名.方法名}，#{telCall.getScore(execution)})<br>（1）预约维修节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.JavaDelegate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 ReserveRepairService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/20</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 预约维修</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ReserveRepairService</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(ReserveRepairService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;进入到预约家电维修环节~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityName</span> <span class=\"operator\">=</span> execution.getCurrentActivityName();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityId</span> <span class=\"operator\">=</span> execution.getCurrentActivityId();</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;当前活动名称：&quot;</span> + currentActivityName + <span class=\"string\">&quot;\\n当前活动id：&quot;</span> + currentActivityId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>（2）师傅上门维修节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.JavaDelegate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 DoingRepairService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/23</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 师傅上门维修</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service(&quot;doRepair&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DoingRepairService</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(DoingRepairService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;进入到师傅上门维修环节~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityName</span> <span class=\"operator\">=</span> execution.getCurrentActivityName();</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;当前活动名：&quot;</span> + currentActivityName);</span><br><span class=\"line\">        execution.setVariable(<span class=\"string\">&quot;repairName&quot;</span>,<span class=\"string\">&quot;小王&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>（3）公司电话回访和查看评分节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 TelCallService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/23</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 公司电话回访和查看评分</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service(&quot;telCall&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TelCallService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(TelCallService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 公司电话回访</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">doCall</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;公司电话回访~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">repairName</span> <span class=\"operator\">=</span> execution.getVariable(<span class=\"string\">&quot;repairName&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;您对&quot;</span> + repairName.toString() + <span class=\"string\">&quot;打了几分？&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;您对&quot;</span> + String.valueOf(repairName) + <span class=\"string\">&quot;打了几分？&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查看评分</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getScore</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;查看评分~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">s</span> <span class=\"operator\">=</span> String.valueOf(execution.getVariable(<span class=\"string\">&quot;repairName&quot;</span>));</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">score</span> <span class=\"operator\">=</span> execution.getVariable(<span class=\"string\">&quot;score&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;顾客对&quot;</span> + s + <span class=\"string\">&quot;的评分：&quot;</span> + (<span class=\"type\">int</span>)score);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>6、创建controller  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RepositoryService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RuntimeService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.repository.Deployment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/flow&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlowController</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 说明：springboot项目在依赖camunda-bpm-spring-boot-starter中已经实现了自动部署的功能，</span></span><br><span class=\"line\">    <span class=\"comment\">// 所以我们不用在执行下面的controller方法去手动部署流程了，在启动项目的时候，springboot项目</span></span><br><span class=\"line\">    <span class=\"comment\">// 会自动帮我们部署好resources目录下的所有流程</span></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;部署的第一个流程&quot;</span>) <span class=\"comment\">// 定义部署文件的名称</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;LoanApproval.bpmn&quot;</span>) <span class=\"comment\">// 绑定需要部署的流程文件</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// 部署流程</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/startFlow/&#123;processKey&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String processKey)</span> &#123;</span><br><span class=\"line\">        runtimeService.startProcessInstanceByKey(processKey); <span class=\"comment\">// 这里的方法是ByKey！</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>7、启动项目测试。  </p>\n<h3 id=\"2、部署说明\"><a href=\"#2、部署说明\" class=\"headerlink\" title=\"2、部署说明\"></a>2、部署说明</h3><p><strong>说明：</strong>有三种部署方式。<br>1、代码方法（手动部署）  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;部署的第一个流程&quot;</span>) <span class=\"comment\">// 定义部署文件的名称</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;LoanApproval.bpmn&quot;</span>) <span class=\"comment\">// 绑定需要部署的流程文件</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// 部署流程</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>2、通过导入依赖camunda-bpm-spring-boot-starter自动部署<br>（1）导入依赖  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.17.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>（2）启动项目，就自动将resources目录下的所有流程部署好了<br>（3）可以通过修改配置来关闭自动部署：  </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">      <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 关闭自动部署</span></span><br></pre></td></tr></table></figure>\n<p>3、使用processes.xml配置文件实现自动部署<br>在<code>resources</code>目录下新建<code>META-INF</code>目录，在<code>META-INF</code>目录下新建<code>processes.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">process-application</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.camunda.org/schema/1.0/ProcessApplication&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process-archive</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">process-engine</span>&gt;</span>default<span class=\"tag\">&lt;/<span class=\"name\">process-engine</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认会扫描resource（及其子目录下）的*.bpmn, *.cmmn, *.dmn文件 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 可通过&lt;resource/&gt;指定其他的需要一同部署的资源文件--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 注：formKey中路径需和resource路径一致，如：camunda-forms:deployment:bpmn/payment_confirm.form --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 注：通过Modeler作为附件一起部署，formKey格式为：camunda-forms:deployment:payment_confirm.form --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;resource&gt;bpmn/PaymentInitForm.form&lt;/resource&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;resource&gt;bpmn/PaymentConfirmForm.form&lt;/resource&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;isDeleteUponUndeploy&quot;</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;isScanForProcessDefinitions&quot;</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process-archive</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">process-application</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>然后在项目启动类上使用注解 @EnableProcessApplication，启动项目，也可以把resources目录下的所有流程成功部署。<br><strong>注意：</strong>使用processes.xml配置文件实现自动部署，必须使用注解 @EnableProcessApplication 才能生效，不然不会自动部署。  </p>\n<h3 id=\"3、节点参数介绍\"><a href=\"#3、节点参数介绍\" class=\"headerlink\" title=\"3、节点参数介绍\"></a>3、节点参数介绍</h3><p>1、<code>Service Task</code>（自动执行节点）<br>（1）Implementation  </p>\n<ul>\n<li><code>Java Class</code>：需要实现JavaDelegate接口，并将实现了JavaDelegate接口的类的全路径填写到Java class一栏；  </li>\n<li><code>Delegate expression</code>：需要实现JavaDelegate接口，然后将实现了JavaDelegate接口的类使用注解注入到容器中（可以起个别名），然后将类的名字开头变小写填入Delegate expression一栏（如果使用了别名，就填别名），它会自动执行execute的方法；  </li>\n<li><code>Expression</code>：将类注入到容器中（可以起个别名），类中方法的参数为DelegateExecution execution，然后在Expression一栏填入类名开头变小写.方法名（execution），Result variable为方法的返回值变量名。</li>\n</ul>\n<p>2、并行<br>（1）<code>nrOfActiviteInstances</code>：当前活动的实例数量，即还没有完成的实例数量；<br>（2）<code>loopCounter</code>：循环计数器，办理人在列表中的索引；<br>（3）<code>nrOfInstances</code>：多实例任务中总共的实例数；<br>（4）<code>nrOfCompletedInstances</code>：已经完成的实例数量。<br>可以通过设置<code>Completion Condition</code> 为<code>$&#123;nrOfCompletedInstances == 2&#125;</code>表示任意两个人完成审批。<br>3、网关<br>（1）排他网关：相当于if… else if … else。<br>（2）并行网关：多条路径一起执行，并且必须全部执行完才能执行下一步。<br>（3）包含网关：排他网关 + 并行网关。  </p>\n<h3 id=\"4、流程执行过程说明\"><a href=\"#4、流程执行过程说明\" class=\"headerlink\" title=\"4、流程执行过程说明\"></a>4、流程执行过程说明</h3><p>每个节点执行时，都会先执行下一个节点的User assignment、Task listeners等，目的是将设置好的数据，比如下一个节点审批人，审批策略等传给前端。  </p>\n<h3 id=\"5、关于历史数据存储配置\"><a href=\"#5、关于历史数据存储配置\" class=\"headerlink\" title=\"5、关于历史数据存储配置\"></a>5、关于历史数据存储配置</h3><p><strong>说明：</strong>Camunda工作流的数据都存储在数据库中，历史数据会非常大，可以根据需要，选择存储历史数据的级别来进行存储，camunda支持的级别如下：<br>1、<code>full级别</code>：所有历史数据都会被保存，包括变量的更新；<br>2、<code>audit级别</code>：只有历史的流程实例、活动实例、表单数据等会被保存；<br>3、<code>auto级别</code>：数据之前配置的是什么级别就是用什么级别，如果没有配置则是<code>audit级别</code>；<br>4、<code>none级别</code>：不存储历史数据。  </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">camunda:</span> </span><br><span class=\"line\">\t<span class=\"attr\">bpm:</span> </span><br><span class=\"line\">\t\t<span class=\"attr\">history-level:</span> <span class=\"string\">full</span> <span class=\"comment\"># 历史数据存储级别</span></span><br></pre></td></tr></table></figure>\n<p><strong>建议：</strong>生产环境中建议使用<code>audit级别</code>，开发测试环境可以使用<code>full级别</code>。  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"五、外部任务订阅\"><a href=\"#五、外部任务订阅\" class=\"headerlink\" title=\"五、外部任务订阅\"></a>五、外部任务订阅</h1><p>1、项目git地址：<a href=\"https://gitee.com/zuo-junyuan/camunda.git\">https://gitee.com/zuo-junyuan/camunda.git</a><br>2、项目介绍<br>（1）<code>bpmn</code>是：<code>RomeInvades.bpmn</code>，在<code>src/main/resources/bpmn/zjy/RomeInvades.bpmn</code>；<br>（2）只实现三个业务节点，最后那个用户节点没有去实现（主要针对的是业务节点的外部任务实现），第一个业务是<code>Decide On Direction of Expansion</code>，是使用<code>nodejs</code>实现的外部任务；  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda7.jpg\" class=\"\">  \n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda8.jpg\" class=\"\">  \n<p>（3）启动项目，登录驾驶舱查看，有这个工作流了，启动流程，如果没有外部任务去获取订阅这个启动的流程，流程就会一直卡在第一个Decide On Direction of Expansion节点上，无法往下执行，只有当启动订阅了这个主题的外部任务启动后，才会往下执行。</p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"六、ProcessEngine流程引擎常用API\"><a href=\"#六、ProcessEngine流程引擎常用API\" class=\"headerlink\" title=\"六、ProcessEngine流程引擎常用API\"></a>六、ProcessEngine流程引擎常用API</h1><p><strong>说明：</strong>流程引擎（<code>ProcessEngine</code>）是Camunda BPM中用于管理和执行工作流程的核心组件。它提供了一组API，允许开发人员与Camunda BPM进行交互，包括创建、管理和执行流程实例。  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda9.jpg\" class=\"\">  \n<p><strong>说明：</strong>要先获取流程引擎对象，才能获取各sercive使用流程引擎API，默认的流程引擎是通过<code>processes.xml</code>来描述的，Springboot的话不用先获取流程引擎对象，可以直接使用<code>@Autowired</code>注解获取各sercive使用流程引擎API。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取默认流程引擎</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取仓库的服务（提供对流程定义和部署存储库的访问的服务），比如部署新的流程</span></span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 可以获取运行中的流程实例</span></span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取任务实例，比如可以对这个任务实例进行开始任务，然后任务变成流程实例</span></span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 管理用户和组的服务</span></span><br><span class=\"line\">IdentityServiceidentityService = processEngine.getIdentityService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 访问表单数据和呈现表单，以启动新的流程实例和完成任务</span></span><br><span class=\"line\"><span class=\"type\">FormService</span> <span class=\"variable\">formService</span> <span class=\"operator\">=</span> processEngine.getFormService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 公开有关正在进行和过去的流程实例的信息的服务，</span></span><br><span class=\"line\"><span class=\"comment\">// 这与运行时信息的不同之处在于，</span></span><br><span class=\"line\"><span class=\"comment\">// 该运行时信息仅包含任何给定时刻的实际运行时状态，</span></span><br><span class=\"line\"><span class=\"comment\">// 并且针对运行时流程执行性能进行了优化。</span></span><br><span class=\"line\"><span class=\"comment\">// 历史信息经过优化，便于查询，并在持久存储中保持永久</span></span><br><span class=\"line\"><span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用于流程引擎上的管理和维护操作的服务。这些操作通常不会在工作流驱动的应用程序中使用，但会在例如操作控制台中使用</span></span><br><span class=\"line\"><span class=\"type\">ManagementService</span> <span class=\"variable\">managementService</span> <span class=\"operator\">=</span> processEngine.getManagementService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">FilterService</span> <span class=\"variable\">filterService</span> <span class=\"operator\">=</span> processEngine.getFilterService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 提供对ExternalTask实例的访问的服务。外部任务表示在外部独立于流程引擎处理的工作项</span></span><br><span class=\"line\"><span class=\"type\">ExternalTaskService</span> <span class=\"variable\">externalTaskService</span> <span class=\"operator\">=</span> processEngine.getExternalTaskService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">CaseService</span> <span class=\"variable\">caseService</span> <span class=\"operator\">=</span> processEngine.getCaseService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">DecisionService</span> <span class=\"variable\">decisionService</span> <span class=\"operator\">=</span> processEngine.getDecisionService();</span><br></pre></td></tr></table></figure>\n","more":"<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"一、Camunda教程\"><a href=\"#一、Camunda教程\" class=\"headerlink\" title=\"一、Camunda教程\"></a>一、Camunda教程</h1><p><a href=\"https://zhuanlan.zhihu.com/p/586479914\">请点击此处</a>；<br><a href=\"https://zhuanlan.zhihu.com/p/642365050\">比上面还详细的教程</a>。</p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"二、生成的数据表说明\"><a href=\"#二、生成的数据表说明\" class=\"headerlink\" title=\"二、生成的数据表说明\"></a>二、生成的数据表说明</h1><p>一、总介绍<br>1、<code>act_re_*</code>：<code>re</code>表示流程资源存储，这个前缀的表包含了流程定义和流程静态资源（图片，规则等），共5张表。<br>2、<code>act_ru_*</code>：<code>ru</code>表示流程运行时。 这些运行时的表，包含流程实例，任务，变量，Job等运行中的数据。 Camunda只在流程实例执行过程中保存这些数据，在流程结束时就会删除这些记录， 这样运行时表的数据量最小，可以最快运行。共15张表。<br>3、<code>act_id_*</code>：<code>id</code>表示组织用户信息，比如用户，组等，共6张表。<br>4、<code>act_hi_*</code>：<code>hi</code>表示流程历史记录。 这些表包含历史数据，比如历史流程实例，变量，任务等，共18张表。<br>5、<code>act_ge_*</code>：<code>ge</code>表示流程通用数据， 用于不同场景下，共3张表。<br>二、每个表介绍<br>1、流程资源存储类<br>（1）<code>act_re_case_def</code>：CMMN案例管理模型定义表<br>（2）<code>act_re_decision_def</code>：DMN决策模型定义表<br>（3）<code>act_re_decision_req_def</code>：决策需求定义表<br>（4）<code>act_re_deployment</code>：流程部署表<br>（5）<code>act_re_procdef</code>：BPMN流程模型定义表<br>2、流程运行类<br>（1）<code>act_ru_authorization</code>：流程运行时权限授予的表（是否使用与是否开启”camunda.bpm.authorization.enabled” ： “true”  or  “false”有关）<br>（2）<code>act_ru_batch</code>：流程执行批处理表<br>（3）<code>act_ru_case_execution</code>：CMMN案例运行执行表<br>（4）<code>act_ru_case_sentry_part</code>：CMMN案例运行时哨兵部分表<br>（5）<code>act_ru_event_subscr</code>：流程事件订阅表<br>（6）<code>act_ru_execution</code>：BPMN流程运行时记录表（运行时流程执行实例表，与流程实例并不一样）<br>（7）<code>act_ru_ext_task</code>：流程任务消息执行表（运行时外部任务信息表）<br>（8）<code>act_ru_filter</code>：流程定义查询配置表（运行时过滤器表）<br>（9）<code>act_ru_identitylink</code>：运行时流程人员表<br>（10）<code>act_ru_incident</code>：运行时异常事件表（工作流引擎突发事件表）<br>（11）<code>act_ru_job</code>：流程运行时作业表<br>（12）<code>act_ru_jobdef</code>：流程作业定义表<br>（13）<code>act_ru_meter_log</code>：流程运行时度量日志表<br>（14）<code>act_ru_task</code>：流程运行时任务表（最常用的表之一，每一个流程实例开启后，到达的每一个task都会生成在这里，也就是任务实例）<br>（15）<code>act_ru_variable</code>：流程运行时变量表（在开启流程实例或者在流程推进时传入的参数，在流程未结束前，都会存储在这里，但是并不是每个节点的变量变化都在这里，比如一个布尔值的confirm如果多次传入，这里也只会存在一个confirm，但是在act_hi_detail表中会有每个节点中confirm变化的值）<br>3、用户信息类<br>（1）<code>act_id_group</code>：审批组信息表<br>（2）<code>act_id_info</code>：用户扩展信息表<br>（3）<code>act_id_membership</code>：用户和审批组之间的关系的表<br>（4）<code>act_id_tenant</code>：租户信息表<br>（5）<code>act_id_tenant_member</code>：用户租户关系表<br>（6）<code>act_id_user</code>：用户信息表<br>4、流程历史记录类<br>（1）<code>act_hi_actinst</code>：历史的活动实例表<br>（2）<code>act_hi_attachment</code>：历史的流程附件表<br>（3）<code>act_hi_batch</code>：历史的批处理记录表<br>（4）<code>act_hi_caseactinst</code>：历史的CMMN活动实例表<br>（5）<code>act_hi_caseinst</code>：历史的CMMN实例表<br>（6）<code>act_hi_comment</code>：历史的流程审批意见表<br>（7）<code>act_hi_dec_in</code>：历史的DMN变量输入表<br>（8）<code>act_hi_dec_out</code>：历史的DMN变量输出表<br>（9）<code>act_hi_decinst</code>：历史的DMN实例表，包含有关决策的单个评估的信息，包括输入和输出值<br>（10）<code>act_hi_detail</code>：历史的流程运行时变量详情记录表<br>（11）<code>act_hi_ext_task_log</code>：历史的流程任务消息执行表<br>（12）<code>act_hi_identitylink</code>：历史的流程运行过程中用户关系<br>（13）<code>act_hi_incident</code>：历史的流程异常事件记录表<br>（14）<code>act_hi_job_log</code>：历史的流程作业记录表<br>（15）<code>act_hi_op_log</code>：历史的用户操作记录表，包含有关用户执行的操作的信息的日志条目，这用于记录操作，如创建新任务、完成任务等<br>（16）<code>act_hi_procinst</code>：历史的流程实例<br>（17）<code>act_hi_taskinst</code>：历史的任务实例<br>（18）<code>act_hi_varinst</code>：历史的流程变量记录表<br>5、流程通用数据类<br>（1）<code>act_ge_bytearray</code>：流程引擎二进制数据表<br>（2）<code>act_ge_property</code>：流程引擎属性配置表<br>（3）<code>act_ge_schema_log</code>：数据库脚本执行日志表  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"三、每个表中字段说明\"><a href=\"#三、每个表中字段说明\" class=\"headerlink\" title=\"三、每个表中字段说明\"></a>三、每个表中字段说明</h1><h3 id=\"1、act-ge-bytearray（流程引擎二进制数据表）\"><a href=\"#1、act-ge-bytearray（流程引擎二进制数据表）\" class=\"headerlink\" title=\"1、act_ge_bytearray（流程引擎二进制数据表）\"></a>1、act_ge_bytearray（流程引擎二进制数据表）</h3><p>1、<code>id</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>name_</code>：名称<br>4、<code>deployment_id_</code>：部署id<br>5、<code>bytes_</code>：字节内容<br>6、<code>generated_</code>：是否系统生成（0用户创建，null系统创建）<br>7、<code>tenant_id_</code>：租户id<br>8、<code>type_</code>：类型<br>9、<code>create_time_</code>：创建时间<br>10、<code>root_proc_inst_id_</code>：流程实例根id<br>11、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"2、act-ge-property（流程引擎属性配置表）\"><a href=\"#2、act-ge-property（流程引擎属性配置表）\" class=\"headerlink\" title=\"2、act_ge_property（流程引擎属性配置表）\"></a>2、act_ge_property（流程引擎属性配置表）</h3><p>1、<code>name_</code>：名称<br>2、<code>value_</code>：值<br>3、<code>rev_</code>：版本  </p>\n<h3 id=\"3、act-ge-schema-log（数据库脚本执行日志表）\"><a href=\"#3、act-ge-schema-log（数据库脚本执行日志表）\" class=\"headerlink\" title=\"3、act_ge_schema_log（数据库脚本执行日志表）\"></a>3、act_ge_schema_log（数据库脚本执行日志表）</h3><p>1、<code>id_</code>：主键<br>2、<code>timestamp_</code>：时间戳<br>3、<code>version_</code>：版本  </p>\n<h3 id=\"4、act-hi-actinst（历史的活动实例表）\"><a href=\"#4、act-hi-actinst（历史的活动实例表）\" class=\"headerlink\" title=\"4、act_hi_actinst（历史的活动实例表）\"></a>4、act_hi_actinst（历史的活动实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>parent_act_inst_id_</code>：父节点实例id<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：执行实例id<br>8、<code>act_id_</code>：节点id<br>9、<code>task_id_</code>：任务id<br>10、<code>call_proc_inst_id_</code>：调用外部的流程实例id<br>11、<code>call_case_inst_id_</code>：调用外部的案例实例id<br>12、<code>act_name_</code>：节点名称<br>13、<code>acr_type_</code>：节点类型<br>14、<code>assignee_</code>：办理人<br>15、<code>start_time_</code>：开始时间<br>16、<code>end_time_</code>：结束时间<br>17、<code>duration_</code>：耗时<br>18、<code>act_inst_state_</code>：活动实例状态<br>19、<code>sequence_counter_</code>：序列计数器<br>20、<code>tenant_id_</code>：租户id<br>21、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"5、act-hi-comment（历史流程审批意见表）\"><a href=\"#5、act-hi-comment（历史流程审批意见表）\" class=\"headerlink\" title=\"5、act_hi_comment（历史流程审批意见表）\"></a>5、act_hi_comment（历史流程审批意见表）</h3><p>1、<code>id_</code>：主键<br>2、<code>type_</code>：类型<br>3、<code>time_</code>：时间<br>4、<code>user_id_</code>：处理人id<br>5、<code>task_id_</code>：任务id<br>6、<code>root_proc_inst_id_</code>：流程实例根id<br>7、<code>proc_inst_id_</code>：流程实例id<br>8、<code>action_</code>：行为类型<br>9、<code>messages_</code>：基本内容<br>10、<code>full_msg_</code>：全部内容<br>11、<code>tenant_id_</code>：租户id<br>12、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"6、act-hi-detail（历史的流程运行详情表）\"><a href=\"#6、act-hi-detail（历史的流程运行详情表）\" class=\"headerlink\" title=\"6、act_hi_detail（历史的流程运行详情表）\"></a>6、act_hi_detail（历史的流程运行详情表）</h3><p>1、<code>id</code>：主键<br>2、<code>type_</code>：类型<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：流程执行id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>task_id_</code>：任务id<br>13、<code>act_inst_id_</code>：节点实例id<br>14、<code>var_inst_id_</code>：流程变量记录id<br>15、<code>name_</code>：名称<br>16、<code>var_type_</code>：变量类型<br>17、<code>rev_</code>：版本<br>18、<code>time_</code>：时间戳<br>19、<code>bytearray_id_</code>：二进制数据对应id<br>20、<code>double_</code>：double类型值<br>21、<code>long_</code>：long类型值<br>22、<code>text_</code>：文本类型值<br>23、<code>text2_</code>：文本类型值2<br>24、<code>sequence_counter_</code>：序列计数器<br>25、<code>tenant_id_</code>：租户id<br>26、<code>operation_id_</code>：操作id<br>27、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"7、act-hi-identitylink（历史的流程运行过程中用户表）\"><a href=\"#7、act-hi-identitylink（历史的流程运行过程中用户表）\" class=\"headerlink\" title=\"7、act_hi_identitylink（历史的流程运行过程中用户表）\"></a>7、act_hi_identitylink（历史的流程运行过程中用户表）</h3><p>1、<code>id_</code>：主键<br>2、<code>timestamp_</code>：时间戳<br>3、<code>type_</code>：类型<br>4、<code>user_id_</code>：用户id<br>5、<code>group_id_</code>：用户组id<br>6、<code>task_id_</code>：任务id<br>7、<code>root_proc_inst_id_</code>：流程实例根id<br>8、<code>proc_def_id_</code>：流程定义id<br>9、<code>operation_type_</code>：操作类型<br>10、<code>assigner_id_</code>：分配者id<br>11、<code>proc_def_key_</code>：流程定义key<br>12、<code>tenant_id_</code>：租户id<br>13、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"8、act-hi-procinst（历史的流程实例表）\"><a href=\"#8、act-hi-procinst（历史的流程实例表）\" class=\"headerlink\" title=\"8、act_hi_procinst（历史的流程实例表）\"></a>8、act_hi_procinst（历史的流程实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>business_key_</code>：业务key<br>4、<code>proc_def_key_</code>：流程定义key<br>5、<code>pro_def_id_</code>：流程定义id<br>6、<code>start_time_</code>：开始时间<br>7、<code>end_time_</code>：结束时间<br>8、<code>removal_time_</code>：删除时间<br>9、<code>duration_</code>：耗时<br>10、<code>start_user_id_</code>：启动人id<br>11、<code>start_act_id_</code>：启动节点id<br>12、<code>end_act_id_</code>：结束节点<br>13、<code>super_process_instance_id_</code>：父流程实例id<br>14、<code>root_proc_inst_id_</code>：流程实例根id<br>15、<code>super_case_instance_id_</code>：父案例实例id<br>16、<code>case_inst_id_</code>：案例实例id<br>17、<code>delete_reason_</code>：删除原因<br>18、<code>tenant_id_</code>：租户id<br>19、<code>state_</code>：状态  </p>\n<h3 id=\"9、act-hi-taskinst（历史的任务实例表）\"><a href=\"#9、act-hi-taskinst（历史的任务实例表）\" class=\"headerlink\" title=\"9、act_hi_taskinst（历史的任务实例表）\"></a>9、act_hi_taskinst（历史的任务实例表）</h3><p>1、<code>id_</code>：主键<br>2、<code>task_def_key_</code>：任务定义key<br>3、<code>proc_def_key_</code>：流程定义key<br>4、<code>proc_def_id_</code>：流程定义id<br>5、<code>root_proc_inst_id_</code>：流程实例根id<br>6、<code>proc_inst_id_</code>：流程实例id<br>7、<code>execution_id_</code>：流程执行id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>act_inst_id_</code>：节点实例id<br>13、<code>name_</code>：名称<br>14、<code>parent_task_id_</code>：父任务id<br>15、<code>description_</code>：描述<br>16、<code>owner_</code>：委托人id<br>17、<code>assignee_</code>：办理人id<br>18、<code>start_time_</code>：开始时间<br>19、<code>end_time_</code>：结束时间<br>20、<code>duration_</code>：耗时<br>21、<code>delete_reason_</code>：删除原因<br>22、<code>priority_</code>：优先级<br>23、<code>due_date_</code>：超时时间<br>24、<code>follow_up_date_</code>：跟踪时间<br>25、<code>tenant_id_</code>：租户id<br>26、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"10、act-hi-varinst（历史的流程变量表）\"><a href=\"#10、act-hi-varinst（历史的流程变量表）\" class=\"headerlink\" title=\"10、act_hi_varinst（历史的流程变量表）\"></a>10、act_hi_varinst（历史的流程变量表）</h3><p>1、<code>id_</code>：主键<br>2、<code>proc_def_key_</code>：流程定义key<br>3、<code>proc_def_id_</code>：流程定义id<br>4、<code>root_proc_inst_id_</code>：流程实例根id<br>5、<code>proc_inst_id</code>：流程实例id<br>6、<code>execution_id_</code>：流程执行id<br>7、<code>act_inst_id</code>：节点实例id<br>8、<code>case_def_key_</code>：案例定义key<br>9、<code>case_def_id_</code>：案例定义id<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>case_execution_id_</code>：案例执行id<br>12、<code>task_id_</code>：任务id<br>13、<code>name_</code>：名称<br>14、<code>var_type_</code>：变量类型<br>15、<code>create_time_</code>：创建时间<br>16、<code>rev_</code>：版本<br>17、<code>bytearrary_id_</code>：二进制数据id<br>18、<code>double_</code>：double类型值<br>19、<code>long_</code>：long类型值<br>20、<code>text_</code>：文本类型值<br>21、<code>text2_</code>：文本类型值2<br>22、<code>tenant_id_</code>：租户id<br>23、<code>state_</code>：状态<br>24、<code>removal_time_</code>：删除时间  </p>\n<h3 id=\"11、act-id-user（用户表）\"><a href=\"#11、act-id-user（用户表）\" class=\"headerlink\" title=\"11、act_id_user（用户表）\"></a>11、act_id_user（用户表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>first_</code>：姓<br>4、<code>last_</code>：名<br>5、<code>emall_</code>：邮件<br>6、<code>pwd_</code>：密码<br>7、<code>salt_</code>：盐值<br>8、<code>lock_exp_time_</code>：锁定过期时间<br>9、<code>attempts_</code>：尝试次数<br>10、<code>picture_id_</code>：图片id  </p>\n<h3 id=\"12、act-id-group（群组表）\"><a href=\"#12、act-id-group（群组表）\" class=\"headerlink\" title=\"12、act_id_group（群组表）\"></a>12、act_id_group（群组表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>name_</code>：组名称<br>4、<code>type_</code>：组类型（SYSTEM系统、WORKFLOW业务）  </p>\n<h3 id=\"13、act-id-membership（用户与群组关系表）\"><a href=\"#13、act-id-membership（用户与群组关系表）\" class=\"headerlink\" title=\"13、act_id_membership（用户与群组关系表）\"></a>13、act_id_membership（用户与群组关系表）</h3><p>1、<code>user_id_</code>：用户id<br>2、<code>group_id_</code>：组id  </p>\n<h3 id=\"14、act-re-deployment（流程部署表）\"><a href=\"#14、act-re-deployment（流程部署表）\" class=\"headerlink\" title=\"14、act_re_deployment（流程部署表）\"></a>14、act_re_deployment（流程部署表）</h3><p>1、<code>id_</code>：主键<br>2、<code>name_</code>：流程名称<br>3、<code>deploy_time_</code>：部署时间<br>4、<code>source_</code>：来源<br>5、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"15、act-re-procdef（流程定义表）\"><a href=\"#15、act-re-procdef（流程定义表）\" class=\"headerlink\" title=\"15、act_re_procdef（流程定义表）\"></a>15、act_re_procdef（流程定义表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>category_</code>：流程定义的Namespace分类<br>4、<code>name_</code>：流程定义名称<br>5、<code>key_</code>：流程定义key<br>6、<code>version_</code>：流程定义版本号<br>7、<code>deployment_id_</code>：部署id<br>8、<code>resource_name_</code>：资源名称<br>9、<code>dgrm_resource_name_</code>：gram资源名称<br>10、<code>has_start_form_key_</code>：是否有启动表单<br>11、<code>suspension_state_</code>：流程挂起<br>12、<code>tenant_id_</code>：租户id<br>13、<code>version_tag_</code>：版本标签<br>14、<code>startable_</code>：是否是可启动流程  </p>\n<h3 id=\"16、act-ru-event-subscr（流程事件订阅表）\"><a href=\"#16、act-ru-event-subscr（流程事件订阅表）\" class=\"headerlink\" title=\"16、act_ru_event_subscr（流程事件订阅表）\"></a>16、act_ru_event_subscr（流程事件订阅表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>event_type_</code>：事件类型<br>4、<code>event_name_</code>：事件名称<br>5、<code>execution_id_</code>：执行id<br>6、<code>pro_inst_id</code>：流程实例id<br>7、<code>activity_id_</code>：节点id<br>8、<code>configuration_</code>：配置<br>9、<code>created_</code>：创建时间<br>10、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"17、act-ru-execution（流程运行时表）\"><a href=\"#17、act-ru-execution（流程运行时表）\" class=\"headerlink\" title=\"17、act_ru_execution（流程运行时表）\"></a>17、act_ru_execution（流程运行时表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>root_proc_inst_id_</code>：流程实例根id<br>4、<code>proc_inst_id_</code>：流程实例id<br>5、<code>business_key_</code>：业务key<br>6、<code>parent_id_</code>：流程父实例id<br>7、<code>proc_def_id_</code>：流程定义id<br>8、<code>super_exec_</code>：父流程实例对应的执行<br>9、<code>super_case_exec_</code>：父案例实例对应的执行<br>10、<code>case_inst_id_</code>：案例实例id<br>11、<code>act_id_</code>：节点id<br>12、<code>act_inst_id</code>：节点实例id<br>13、<code>is_active_</code>：是否激活<br>14、<code>is_concurrent_</code>：是否并行<br>15、<code>is_scope_</code>：是否多实例范围<br>16、<code>is_event_scope_</code>：是否事件多实例范围<br>17、<code>suspension_state_</code>：挂起状态<br>18、<code>cached_ent_state_</code>：缓存状态<br>19、<code>sequence_counter_</code>：序列计数器<br>20、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"18、act-ru-identitylink（流程运行时表）\"><a href=\"#18、act-ru-identitylink（流程运行时表）\" class=\"headerlink\" title=\"18、act_ru_identitylink（流程运行时表）\"></a>18、act_ru_identitylink（流程运行时表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>group_id_</code>：用户组id<br>4、<code>type_</code>：类型<br>5、<code>user_id_</code>：用户id<br>6、<code>task_id_</code>：任务id<br>7、<code>proc_def_id_</code>：流程定义id<br>8、<code>tenant_id_</code>：租户id  </p>\n<h3 id=\"19、act-ru-incident（-运行时异常记录表）\"><a href=\"#19、act-ru-incident（-运行时异常记录表）\" class=\"headerlink\" title=\"19、act_ru_incident（ 运行时异常记录表）\"></a>19、act_ru_incident（ 运行时异常记录表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>incident_timestamp_</code>：事件时间戳<br>4、<code>incident_msg_</code>：事件信息<br>5、<code>incident_type_</code>：事件类型<br>6、<code>execution_id_</code>：流程执行id<br>7、<code>activity_id_</code>：节点id<br>8、<code>proc_inst_id_</code>：流程实例id<br>9、<code>proc_def_id_</code>：流程定义id<br>10、<code>cause_incident_id_</code>：事件原因id<br>11、<code>root_cause_incident_id_</code>：事件原因根id<br>12、<code>configuration_</code>：事件配置<br>13、<code>tenant_id_</code>：租户id<br>14、<code>job_def_id_</code>：job定义id  </p>\n<h3 id=\"20、act-ru-job（-流程运行时作业表）\"><a href=\"#20、act-ru-job（-流程运行时作业表）\" class=\"headerlink\" title=\"20、act_ru_job（ 流程运行时作业表）\"></a>20、act_ru_job（ 流程运行时作业表）</h3><p>1、<code>id_</code>：主键<br>2、<code>rev_</code>：版本<br>3、<code>type_</code>：类型<br>4、<code>lock_exp_time_</code>：锁定过期时间<br>5、<code>lock_owner_</code>：锁定用户<br>6、<code>exclusive_</code>：独占标识<br>7、<code>execution_id_</code>：执行id<br>8、<code>process_instance_id_</code>：流程实例id<br>9、<code>process_def_id_</code>：流程定义id<br>10、<code>process_def_key_</code>：流程定义key<br>11、<code>retries_</code>：重试次数<br>12、<code>exception_stack_id_</code>：异常堆栈id<br>13、<code>exception_msg_</code>：异常信息<br>14、<code>duedate_</code>：截止时间<br>15、<code>repeat_</code>：重复<br>16、<code>handler_type_</code>：处理类型<br>17、<code>handler_cfg_</code>：处理配置<br>18、<code>deployment_id_</code>：部署id<br>19、<code>suspension_state_</code>：挂起状态<br>20、<code>job_def_id_</code>：作业定义id<br>21、<code>priority_</code>：作业优先级<br>22、<code>sequence_counter_</code>：序列计数器<br>23、<code>tenant_id</code>：租户id<br>24、<code>create_time_</code>：创建时间  </p>\n<h3 id=\"21、act-ru-jobdef（-流程作业定义表）\"><a href=\"#21、act-ru-jobdef（-流程作业定义表）\" class=\"headerlink\" title=\"21、act_ru_jobdef（ 流程作业定义表）\"></a>21、act_ru_jobdef（ 流程作业定义表）</h3><p>1、<code>job_type_</code>：job类型<br>2、<code>job_configuration_</code>：job配置<br>3、<code>suspension_state_</code>：挂起状态<br>4、<code>job_priority</code>：优先级  </p>\n<h3 id=\"22、act-ru-task（-流程运行时任务表）\"><a href=\"#22、act-ru-task（-流程运行时任务表）\" class=\"headerlink\" title=\"22、act_ru_task（ 流程运行时任务表）\"></a>22、act_ru_task（ 流程运行时任务表）</h3><p>1、<code>execution_id_</code>：流程执行id<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>proc_def_id_</code>：流程定义id<br>4、<code>case_execution_id_</code>：案例执行id<br>5、<code>case_inst_id_</code>：案例实例id<br>6、<code>case_def_id_</code>：案例定义id<br>7、<code>parent_task_id_</code>：父任务id<br>8、<code>description_</code>：描述<br>9、<code>task_def_key_</code>：任务定义key<br>10、<code>owner_</code>：委托人<br>11、<code>assignee_</code>：办理人<br>12、<code>delegation</code>：委托状态<br>13、<code>priority_</code>：优先级<br>14、<code>due_date_</code>：截止时间<br>15、<code>follow_up_date_</code>：跟踪时间<br>16、<code>suspension_state_</code>：挂起状态  </p>\n<h3 id=\"23、act-ru-variable（-流程运行时变量表）\"><a href=\"#23、act-ru-variable（-流程运行时变量表）\" class=\"headerlink\" title=\"23、act_ru_variable（ 流程运行时变量表）\"></a>23、act_ru_variable（ 流程运行时变量表）</h3><p>1、<code>execution_id_</code>：流程执行id<br>2、<code>proc_inst_id_</code>：流程实例id<br>3、<code>case_exrcution_id_</code>：案例执行id<br>4、<code>case_inst_id_</code>：案例实例id<br>5、<code>task_id_</code>：任务id<br>6、<code>bytearray_id_</code>：二进制内容id<br>7、<code>double_</code>：double类型值<br>8、<code>long_</code>：long类型值<br>9、<code>text_</code>：文本<br>10、<code>text2</code>：文本2<br>11、<code>var_scope_</code>：变量范围<br>12、<code>sequence_counter_</code>：序列计数器<br>13、<code>is_concurrent_local_</code>：是否并发  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"四、springboot集成camunda部署教程以及说明\"><a href=\"#四、springboot集成camunda部署教程以及说明\" class=\"headerlink\" title=\"四、springboot集成camunda部署教程以及说明\"></a>四、springboot集成camunda部署教程以及说明</h1><h3 id=\"1、步骤\"><a href=\"#1、步骤\" class=\"headerlink\" title=\"1、步骤\"></a>1、步骤</h3><p>1、创建springboot项目，并且导入依赖  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.zjy.workflow<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-springboot-testdemo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-dependencies<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bom<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.19.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  流程引擎 在Rest服务接口的依赖中有了--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;artifactId&gt;camunda-bpm-spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;version&gt;7.17.0&lt;/version&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  Rest服务接口--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-rest<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  web界面模块，就是那个驾驶舱登录界面，不需要可以不导入--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-webapp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-engine-plugin-spin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.spin<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-spin-dataformat-all<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba.fastjson2<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.0.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--mysql--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;groupId&gt;mysql&lt;/groupId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--          &lt;version&gt;5.1.47&lt;/version&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--postgresql--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.postgresql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>postgresql<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.6.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2、创建application.yml</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">8088</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">application:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">camunda-springboot-testdemo</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"comment\"># postgresql</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:postgresql://192.168.126.130:5432/postgres?useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">org.postgresql.Driver</span></span><br><span class=\"line\">  <span class=\"attr\">sql:</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">always</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># mysql</span></span><br><span class=\"line\"><span class=\"comment\">#    url: jdbc:mysql://39.103.217.57:3306/camunda2?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;useOldAliasMetadataBehavior=true</span></span><br><span class=\"line\"><span class=\"comment\">#    driver-class-name: com.mysql.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"comment\">#    username: root</span></span><br><span class=\"line\"><span class=\"comment\">#    password: root</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">    <span class=\"attr\">admin-user:</span></span><br><span class=\"line\">      <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">      <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">    <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 关闭springboot继承好的自动部署功能</span></span><br></pre></td></tr></table></figure>\n<p>3、创建日志输出log4j2.xml配置文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--monitorInterval属性值（秒数）为一个非零值来让Log4j每隔指定的秒数来重新读取配置文件，可以用来动态应用Log4j配置--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Configuration</span> <span class=\"attr\">status</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">monitorInterval</span>=<span class=\"string\">&quot;30&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--用来自定义一些变量--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--变量定义--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;myPattern&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;Property name=&quot;dir_url&quot;&gt;d:/logs&lt;/Property&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--使用Appenders元素可以将日志事件数据写到各种目标位置--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Appenders</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认打印到控制台 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Console</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ConsoleAppend&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 默认打印格式 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">PatternLayout</span> <span class=\"attr\">pattern</span>=<span class=\"string\">&quot;$&#123;myPattern&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">Console</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 打印到日志文件上 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;File name=&quot;FileAppend&quot; fileName=&quot;$&#123;dir_url&#125;/fileLog.log&quot; bufferedIO=&quot;true&quot; immediateFlush=&quot;true&quot;&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;PatternLayout&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--                &lt;pattern&gt;$&#123;myPattern&#125;&lt;/pattern&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;/PatternLayout&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        &lt;/File&gt;--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Appenders</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loggers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认打印日志级别为 error --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;INFO&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">AppenderRef</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;ConsoleAppend&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">AppenderRef</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;FileAppend&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">Root</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Loggers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>4、使用流程设计器，设计一个bpmn流程，并保存到resources目录下  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda1.jpg\" class=\"\">  \n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda2.jpg\" class=\"\">  \n<p>（1）预约维修节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda3.jpg\" class=\"\">  \n<p>（2）师傅上门维修节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda4.jpg\" class=\"\">  \n<p>（3）公司电话回访节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda5.jpg\" class=\"\">  \n<p>（4）查看评分节点  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda6.jpg\" class=\"\">  \n<p>5、创建service<br><strong>说明：</strong><br>我们创建的预约维修节点、师傅上门维修节点、公司电话回访节点和查看评分节点都是业务节点，属于业务节点<code>Implementation</code>选项的说明：如果<code>Type</code>项选择的是<code>Java Class</code>和<code>Delegate expression</code>，代码中类需要实现<code>JavaDelegate接口</code>，例子如下；如果选择的是<code>Expression</code>，不需要实现，只需先在<code>@Service</code>注解中起个别名，根据节点要求写方法，然后在<code>bpmn</code>中将别名和方法填入<code>Expression</code>选项中（格式：#{别名.方法名}，#{telCall.getScore(execution)})<br>（1）预约维修节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.JavaDelegate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 ReserveRepairService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/20</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 预约维修</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ReserveRepairService</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(ReserveRepairService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;进入到预约家电维修环节~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityName</span> <span class=\"operator\">=</span> execution.getCurrentActivityName();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityId</span> <span class=\"operator\">=</span> execution.getCurrentActivityId();</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;当前活动名称：&quot;</span> + currentActivityName + <span class=\"string\">&quot;\\n当前活动id：&quot;</span> + currentActivityId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>（2）师傅上门维修节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.JavaDelegate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 DoingRepairService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/23</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 师傅上门维修</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service(&quot;doRepair&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DoingRepairService</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(DoingRepairService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;进入到师傅上门维修环节~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">currentActivityName</span> <span class=\"operator\">=</span> execution.getCurrentActivityName();</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;当前活动名：&quot;</span> + currentActivityName);</span><br><span class=\"line\">        execution.setVariable(<span class=\"string\">&quot;repairName&quot;</span>,<span class=\"string\">&quot;小王&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>（3）公司电话回访和查看评分节点  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.delegate.DelegateExecution;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建人 zjy</span></span><br><span class=\"line\"><span class=\"comment\"> * @文件名 TelCallService</span></span><br><span class=\"line\"><span class=\"comment\"> * @创建时间 2023/10/23</span></span><br><span class=\"line\"><span class=\"comment\"> * @描述 公司电话回访和查看评分</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service(&quot;telCall&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TelCallService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">Logger</span> <span class=\"variable\">logger</span> <span class=\"operator\">=</span> LogManager.getLogger(TelCallService.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 公司电话回访</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">doCall</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;公司电话回访~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">repairName</span> <span class=\"operator\">=</span> execution.getVariable(<span class=\"string\">&quot;repairName&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;您对&quot;</span> + repairName.toString() + <span class=\"string\">&quot;打了几分？&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;您对&quot;</span> + String.valueOf(repairName) + <span class=\"string\">&quot;打了几分？&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查看评分</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getScore</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;查看评分~&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">s</span> <span class=\"operator\">=</span> String.valueOf(execution.getVariable(<span class=\"string\">&quot;repairName&quot;</span>));</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">score</span> <span class=\"operator\">=</span> execution.getVariable(<span class=\"string\">&quot;score&quot;</span>);</span><br><span class=\"line\">        logger.info(<span class=\"string\">&quot;顾客对&quot;</span> + s + <span class=\"string\">&quot;的评分：&quot;</span> + (<span class=\"type\">int</span>)score);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>6、创建controller  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RepositoryService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RuntimeService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.repository.Deployment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/flow&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlowController</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 说明：springboot项目在依赖camunda-bpm-spring-boot-starter中已经实现了自动部署的功能，</span></span><br><span class=\"line\">    <span class=\"comment\">// 所以我们不用在执行下面的controller方法去手动部署流程了，在启动项目的时候，springboot项目</span></span><br><span class=\"line\">    <span class=\"comment\">// 会自动帮我们部署好resources目录下的所有流程</span></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;部署的第一个流程&quot;</span>) <span class=\"comment\">// 定义部署文件的名称</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;LoanApproval.bpmn&quot;</span>) <span class=\"comment\">// 绑定需要部署的流程文件</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// 部署流程</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/startFlow/&#123;processKey&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String processKey)</span> &#123;</span><br><span class=\"line\">        runtimeService.startProcessInstanceByKey(processKey); <span class=\"comment\">// 这里的方法是ByKey！</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>7、启动项目测试。  </p>\n<h3 id=\"2、部署说明\"><a href=\"#2、部署说明\" class=\"headerlink\" title=\"2、部署说明\"></a>2、部署说明</h3><p><strong>说明：</strong>有三种部署方式。<br>1、代码方法（手动部署）  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;部署的第一个流程&quot;</span>) <span class=\"comment\">// 定义部署文件的名称</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;LoanApproval.bpmn&quot;</span>) <span class=\"comment\">// 绑定需要部署的流程文件</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// 部署流程</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>2、通过导入依赖camunda-bpm-spring-boot-starter自动部署<br>（1）导入依赖  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.17.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>（2）启动项目，就自动将resources目录下的所有流程部署好了<br>（3）可以通过修改配置来关闭自动部署：  </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">      <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 关闭自动部署</span></span><br></pre></td></tr></table></figure>\n<p>3、使用processes.xml配置文件实现自动部署<br>在<code>resources</code>目录下新建<code>META-INF</code>目录，在<code>META-INF</code>目录下新建<code>processes.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">process-application</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.camunda.org/schema/1.0/ProcessApplication&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process-archive</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">process-engine</span>&gt;</span>default<span class=\"tag\">&lt;/<span class=\"name\">process-engine</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 默认会扫描resource（及其子目录下）的*.bpmn, *.cmmn, *.dmn文件 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 可通过&lt;resource/&gt;指定其他的需要一同部署的资源文件--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 注：formKey中路径需和resource路径一致，如：camunda-forms:deployment:bpmn/payment_confirm.form --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 注：通过Modeler作为附件一起部署，formKey格式为：camunda-forms:deployment:payment_confirm.form --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;resource&gt;bpmn/PaymentInitForm.form&lt;/resource&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;resource&gt;bpmn/PaymentConfirmForm.form&lt;/resource&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;isDeleteUponUndeploy&quot;</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;isScanForProcessDefinitions&quot;</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process-archive</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">process-application</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>然后在项目启动类上使用注解 @EnableProcessApplication，启动项目，也可以把resources目录下的所有流程成功部署。<br><strong>注意：</strong>使用processes.xml配置文件实现自动部署，必须使用注解 @EnableProcessApplication 才能生效，不然不会自动部署。  </p>\n<h3 id=\"3、节点参数介绍\"><a href=\"#3、节点参数介绍\" class=\"headerlink\" title=\"3、节点参数介绍\"></a>3、节点参数介绍</h3><p>1、<code>Service Task</code>（自动执行节点）<br>（1）Implementation  </p>\n<ul>\n<li><code>Java Class</code>：需要实现JavaDelegate接口，并将实现了JavaDelegate接口的类的全路径填写到Java class一栏；  </li>\n<li><code>Delegate expression</code>：需要实现JavaDelegate接口，然后将实现了JavaDelegate接口的类使用注解注入到容器中（可以起个别名），然后将类的名字开头变小写填入Delegate expression一栏（如果使用了别名，就填别名），它会自动执行execute的方法；  </li>\n<li><code>Expression</code>：将类注入到容器中（可以起个别名），类中方法的参数为DelegateExecution execution，然后在Expression一栏填入类名开头变小写.方法名（execution），Result variable为方法的返回值变量名。</li>\n</ul>\n<p>2、并行<br>（1）<code>nrOfActiviteInstances</code>：当前活动的实例数量，即还没有完成的实例数量；<br>（2）<code>loopCounter</code>：循环计数器，办理人在列表中的索引；<br>（3）<code>nrOfInstances</code>：多实例任务中总共的实例数；<br>（4）<code>nrOfCompletedInstances</code>：已经完成的实例数量。<br>可以通过设置<code>Completion Condition</code> 为<code>$&#123;nrOfCompletedInstances == 2&#125;</code>表示任意两个人完成审批。<br>3、网关<br>（1）排他网关：相当于if… else if … else。<br>（2）并行网关：多条路径一起执行，并且必须全部执行完才能执行下一步。<br>（3）包含网关：排他网关 + 并行网关。  </p>\n<h3 id=\"4、流程执行过程说明\"><a href=\"#4、流程执行过程说明\" class=\"headerlink\" title=\"4、流程执行过程说明\"></a>4、流程执行过程说明</h3><p>每个节点执行时，都会先执行下一个节点的User assignment、Task listeners等，目的是将设置好的数据，比如下一个节点审批人，审批策略等传给前端。  </p>\n<h3 id=\"5、关于历史数据存储配置\"><a href=\"#5、关于历史数据存储配置\" class=\"headerlink\" title=\"5、关于历史数据存储配置\"></a>5、关于历史数据存储配置</h3><p><strong>说明：</strong>Camunda工作流的数据都存储在数据库中，历史数据会非常大，可以根据需要，选择存储历史数据的级别来进行存储，camunda支持的级别如下：<br>1、<code>full级别</code>：所有历史数据都会被保存，包括变量的更新；<br>2、<code>audit级别</code>：只有历史的流程实例、活动实例、表单数据等会被保存；<br>3、<code>auto级别</code>：数据之前配置的是什么级别就是用什么级别，如果没有配置则是<code>audit级别</code>；<br>4、<code>none级别</code>：不存储历史数据。  </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">camunda:</span> </span><br><span class=\"line\">\t<span class=\"attr\">bpm:</span> </span><br><span class=\"line\">\t\t<span class=\"attr\">history-level:</span> <span class=\"string\">full</span> <span class=\"comment\"># 历史数据存储级别</span></span><br></pre></td></tr></table></figure>\n<p><strong>建议：</strong>生产环境中建议使用<code>audit级别</code>，开发测试环境可以使用<code>full级别</code>。  </p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"五、外部任务订阅\"><a href=\"#五、外部任务订阅\" class=\"headerlink\" title=\"五、外部任务订阅\"></a>五、外部任务订阅</h1><p>1、项目git地址：<a href=\"https://gitee.com/zuo-junyuan/camunda.git\">https://gitee.com/zuo-junyuan/camunda.git</a><br>2、项目介绍<br>（1）<code>bpmn</code>是：<code>RomeInvades.bpmn</code>，在<code>src/main/resources/bpmn/zjy/RomeInvades.bpmn</code>；<br>（2）只实现三个业务节点，最后那个用户节点没有去实现（主要针对的是业务节点的外部任务实现），第一个业务是<code>Decide On Direction of Expansion</code>，是使用<code>nodejs</code>实现的外部任务；  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda7.jpg\" class=\"\">  \n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda8.jpg\" class=\"\">  \n<p>（3）启动项目，登录驾驶舱查看，有这个工作流了，启动流程，如果没有外部任务去获取订阅这个启动的流程，流程就会一直卡在第一个Decide On Direction of Expansion节点上，无法往下执行，只有当启动订阅了这个主题的外部任务启动后，才会往下执行。</p>\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"六、ProcessEngine流程引擎常用API\"><a href=\"#六、ProcessEngine流程引擎常用API\" class=\"headerlink\" title=\"六、ProcessEngine流程引擎常用API\"></a>六、ProcessEngine流程引擎常用API</h1><p><strong>说明：</strong>流程引擎（<code>ProcessEngine</code>）是Camunda BPM中用于管理和执行工作流程的核心组件。它提供了一组API，允许开发人员与Camunda BPM进行交互，包括创建、管理和执行流程实例。  </p>\n<img src=\"/2024/01/19/Camunda-%E5%B7%A5%E4%BD%9C%E6%B5%81/Camunda9.jpg\" class=\"\">  \n<p><strong>说明：</strong>要先获取流程引擎对象，才能获取各sercive使用流程引擎API，默认的流程引擎是通过<code>processes.xml</code>来描述的，Springboot的话不用先获取流程引擎对象，可以直接使用<code>@Autowired</code>注解获取各sercive使用流程引擎API。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取默认流程引擎</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取仓库的服务（提供对流程定义和部署存储库的访问的服务），比如部署新的流程</span></span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 可以获取运行中的流程实例</span></span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取任务实例，比如可以对这个任务实例进行开始任务，然后任务变成流程实例</span></span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 管理用户和组的服务</span></span><br><span class=\"line\">IdentityServiceidentityService = processEngine.getIdentityService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 访问表单数据和呈现表单，以启动新的流程实例和完成任务</span></span><br><span class=\"line\"><span class=\"type\">FormService</span> <span class=\"variable\">formService</span> <span class=\"operator\">=</span> processEngine.getFormService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 公开有关正在进行和过去的流程实例的信息的服务，</span></span><br><span class=\"line\"><span class=\"comment\">// 这与运行时信息的不同之处在于，</span></span><br><span class=\"line\"><span class=\"comment\">// 该运行时信息仅包含任何给定时刻的实际运行时状态，</span></span><br><span class=\"line\"><span class=\"comment\">// 并且针对运行时流程执行性能进行了优化。</span></span><br><span class=\"line\"><span class=\"comment\">// 历史信息经过优化，便于查询，并在持久存储中保持永久</span></span><br><span class=\"line\"><span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用于流程引擎上的管理和维护操作的服务。这些操作通常不会在工作流驱动的应用程序中使用，但会在例如操作控制台中使用</span></span><br><span class=\"line\"><span class=\"type\">ManagementService</span> <span class=\"variable\">managementService</span> <span class=\"operator\">=</span> processEngine.getManagementService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">FilterService</span> <span class=\"variable\">filterService</span> <span class=\"operator\">=</span> processEngine.getFilterService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 提供对ExternalTask实例的访问的服务。外部任务表示在外部独立于流程引擎处理的工作项</span></span><br><span class=\"line\"><span class=\"type\">ExternalTaskService</span> <span class=\"variable\">externalTaskService</span> <span class=\"operator\">=</span> processEngine.getExternalTaskService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">CaseService</span> <span class=\"variable\">caseService</span> <span class=\"operator\">=</span> processEngine.getCaseService();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">DecisionService</span> <span class=\"variable\">decisionService</span> <span class=\"operator\">=</span> processEngine.getDecisionService();</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"工作技能","path":"api/categories/工作技能.json"}],"tags":[{"name":"工作技能","path":"api/tags/工作技能.json"},{"name":"工作流","path":"api/tags/工作流.json"},{"name":"Camunda","path":"api/tags/Camunda.json"}]}