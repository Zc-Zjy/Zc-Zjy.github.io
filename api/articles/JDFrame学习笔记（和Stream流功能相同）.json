{"title":"JDFrame学习笔记（和Stream流功能相同）","slug":"JDFrame学习笔记（和Stream流功能相同）","date":"2025-06-04T07:06:14.000Z","updated":"2025-06-04T07:49:36.150Z","comments":true,"path":"api/articles/JDFrame学习笔记（和Stream流功能相同）.json","realPath":null,"excerpt":null,"covers":null,"cover":null,"content":"<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"一、快速开始\"><a href=\"#一、快速开始\" class=\"headerlink\" title=\"一、快速开始\"></a>一、快速开始</h1><p><a href=\"https://github.com/burukeYou/JDFrame\">代码地址</a>&#x2F;<a href=\"https://central.sonatype.com/artifact/io.github.burukeyou/jdframe\">Maven依赖地址</a><br>提供了两种Frame，SDFrame和JDFrame 在API层面一模一样， 区别是JDFrame的所有操作实时生效， 无需要重新read生成，而SDFrame与stream流一致，只有执行终止操作才会生效，并且需要重新read生成流， 而且在同一个流之间的操作是互相影响的。<br>如果只是需要流式操作一条流执行完就用SDFrame， 如果需要“中间站点”数据，然后从“中间站点数据“开始计算就用JDFrame， 这个在含义层面与DataFrame模型类似。<br>依赖：  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.burukeyou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jdframe<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>1、案例<br>统计每个学校的里学生年龄不为空并且年龄在9到16岁间的合计分数，并且获取合计分前2名的学校。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 实体类</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String school;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String level;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> BigDecimal score;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer rank;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Student</span><span class=\"params\">(String level, BigDecimal score)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.level = level;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.score = score;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Student</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, String school, String level, Integer age, BigDecimal score)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.school = school;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.level = level;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.score = score;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 下面是操作伪代码</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> List&lt;Student&gt; studentList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">1</span>,<span class=\"string\">&quot;a&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">11</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">1</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">2</span>,<span class=\"string\">&quot;a&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">11</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">1</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">3</span>,<span class=\"string\">&quot;b&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;三年级&quot;</span>,<span class=\"number\">12</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">2</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">4</span>,<span class=\"string\">&quot;c&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">13</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">3</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">5</span>,<span class=\"string\">&quot;d&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">14</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">4</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">6</span>,<span class=\"string\">&quot;e&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;二年级&quot;</span>,<span class=\"number\">14</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">5</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">7</span>,<span class=\"string\">&quot;e&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;二年级&quot;</span>,<span class=\"number\">15</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">5</span>)));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 等价于SQL:</span></span><br><span class=\"line\"><span class=\"comment\">// select school,sum(score)  </span></span><br><span class=\"line\"><span class=\"comment\">// from students</span></span><br><span class=\"line\"><span class=\"comment\">// where age is not null and age &gt;=9 and age &lt;= 16</span></span><br><span class=\"line\"><span class=\"comment\">// group by school</span></span><br><span class=\"line\"><span class=\"comment\">// order by sum(score) desc</span></span><br><span class=\"line\"><span class=\"comment\">// limit 2</span></span><br><span class=\"line\">SDFrame&lt;FI2&lt;String, BigDecimal&gt;&gt; sdf2 = SDFrame.read(studentList)</span><br><span class=\"line\">        .whereNotNull(Student::getAge)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">9</span>,<span class=\"number\">16</span>)</span><br><span class=\"line\">        .groupBySum(Student::getSchool, Student::getScore)</span><br><span class=\"line\">        .sortDesc(FI2::getC2)</span><br><span class=\"line\">        .cutFirst(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">sdf2.show();</span><br></pre></td></tr></table></figure>\n<p>输出信息：  </p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">c</span><span class=\"number\">1</span>  <span class=\"keyword\">c</span><span class=\"number\">2</span> </span><br><span class=\"line\">三中 <span class=\"number\">10</span> </span><br><span class=\"line\">二中 <span class=\"number\">7</span></span><br></pre></td></tr></table></figure>\n\n\n\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"二、API介绍\"><a href=\"#二、API介绍\" class=\"headerlink\" title=\"二、API介绍\"></a>二、API介绍</h1><h3 id=\"1、矩阵信息相关\"><a href=\"#1、矩阵信息相关\" class=\"headerlink\" title=\"1、矩阵信息相关\"></a>1、矩阵信息相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">show</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>; <span class=\"comment\">// 打印矩阵信息到控制台</span></span><br><span class=\"line\">List&lt;String&gt; <span class=\"title function_\">columns</span><span class=\"params\">()</span>;   <span class=\"comment\">// 获取矩阵的表头字段名</span></span><br><span class=\"line\">List&lt;R&gt; <span class=\"title function_\">col</span><span class=\"params\">(Function&lt;T, R&gt; function)</span>;   <span class=\"comment\">// 获取矩阵某一列值</span></span><br><span class=\"line\">T <span class=\"title function_\">head</span><span class=\"params\">()</span>;                   <span class=\"comment\">// 获取第一个元素</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">head</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>;          <span class=\"comment\">// 获取前n个元素</span></span><br><span class=\"line\">T <span class=\"title function_\">tail</span><span class=\"params\">()</span>;                       <span class=\"comment\">// 获取最后一个元素</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">tail</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>;            <span class=\"comment\">// 获取后n个元素</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、筛选相关\"><a href=\"#2、筛选相关\" class=\"headerlink\" title=\"2、筛选相关\"></a>2、筛选相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame.read(studentList)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>) <span class=\"comment\">// 过滤年龄在[3，6]岁的</span></span><br><span class=\"line\">        .whereBetweenR(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>) <span class=\"comment\">// 过滤年龄在(3，6]岁的, 不含3岁</span></span><br><span class=\"line\">        .whereBetweenL(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>)      <span class=\"comment\">// 过滤年龄在[3，6)岁的, 不含6岁</span></span><br><span class=\"line\">        .whereNotNull(Student::getName) <span class=\"comment\">// 过滤名字不为空的数据， 兼容了空字符串&#x27;&#x27;的判断</span></span><br><span class=\"line\">        .whereGt(Student::getAge,<span class=\"number\">3</span>)    <span class=\"comment\">// 过滤年龄大于3岁</span></span><br><span class=\"line\">        .whereGe(Student::getAge,<span class=\"number\">3</span>)   <span class=\"comment\">// 过滤年龄大于等于3岁</span></span><br><span class=\"line\">        .whereLt(Student::getAge,<span class=\"number\">3</span>)  <span class=\"comment\">// 过滤年龄小于3岁的</span></span><br><span class=\"line\">        .whereIn(Student::getAge, Arrays.asList(<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"comment\">// 过滤年龄为3岁 或者7岁 或者 8岁的数据</span></span><br><span class=\"line\">        .whereNotIn(Student::getAge, Arrays.asList(<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"comment\">// 过滤年龄不为为3岁 或者7岁 或者 8岁的数据</span></span><br><span class=\"line\">        .whereEq(Student::getAge,<span class=\"number\">3</span>) <span class=\"comment\">// 过滤年龄等于3岁的数据</span></span><br><span class=\"line\">        .whereNotEq(Student::getAge,<span class=\"number\">3</span>) <span class=\"comment\">// 过滤年龄不等于3岁的数据</span></span><br><span class=\"line\">        .whereLike(Student::getName,<span class=\"string\">&quot;jay&quot;</span>) <span class=\"comment\">// 模糊查询，等价于 like &quot;%jay%&quot;</span></span><br><span class=\"line\">        .whereLikeLeft(Student::getName,<span class=\"string\">&quot;jay&quot;</span>) <span class=\"comment\">// 模糊查询，等价于 like &quot;jay%&quot;</span></span><br><span class=\"line\">        .whereLikeRight(Student::getName,<span class=\"string\">&quot;jay&quot;</span>); <span class=\"comment\">// 模糊查询，等价于 like &quot;%jay&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、汇总相关\"><a href=\"#3、汇总相关\" class=\"headerlink\" title=\"3、汇总相关\"></a>3、汇总相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JDFrame&lt;Student&gt; frame = JDFrame.read(studentList);</span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">s1</span> <span class=\"operator\">=</span> frame.max(Student::getAge);<span class=\"comment\">// 获取年龄最大的学生</span></span><br><span class=\"line\"><span class=\"type\">Integer</span> <span class=\"variable\">s2</span>  <span class=\"operator\">=</span> frame.maxValue(Student::getAge);      <span class=\"comment\">// 获取学生里最大的年龄</span></span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">s3</span> <span class=\"operator\">=</span> frame.min(Student::getAge);<span class=\"comment\">// 获取年龄最小的学生</span></span><br><span class=\"line\"><span class=\"type\">Integer</span> <span class=\"variable\">s4</span>  <span class=\"operator\">=</span> frame.minValue(Student::getAge);      <span class=\"comment\">// 获取学生里最小的年龄</span></span><br><span class=\"line\"><span class=\"type\">BigDecimal</span> <span class=\"variable\">s5</span> <span class=\"operator\">=</span> frame.avg(Student::getAge); <span class=\"comment\">// 获取所有学生的年龄的平均值</span></span><br><span class=\"line\"><span class=\"type\">BigDecimal</span> <span class=\"variable\">s6</span> <span class=\"operator\">=</span> frame.sum(Student::getAge); <span class=\"comment\">// 获取所有学生的年龄合计</span></span><br><span class=\"line\">MaxMin&lt;Student&gt; s7 = frame.maxMin(Student::getAge); <span class=\"comment\">// 同时获取年龄最大和最小的学生</span></span><br><span class=\"line\">MaxMin&lt;Integer&gt; s8 = frame.maxMinValue(Student::getAge); <span class=\"comment\">// 同时获取学生里最大和最小的年龄</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、去重相关\"><a href=\"#4、去重相关\" class=\"headerlink\" title=\"4、去重相关\"></a>4、去重相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Student&gt; std = <span class=\"literal\">null</span>;</span><br><span class=\"line\">std = SDFrame.read(studentList).distinct().toLists(); <span class=\"comment\">// 根据对象hashCode去重</span></span><br><span class=\"line\">std = SDFrame.read(studentList).distinct(Student::getSchool).toLists(); <span class=\"comment\">// 根据学校名去重</span></span><br><span class=\"line\">std = SDFrame.read(studentList).distinct(e -&gt; e.getSchool() + e.getLevel()).toLists(); <span class=\"comment\">// 根据学校名拼接级别去重复</span></span><br><span class=\"line\">std =SDFrame.read(studentList).distinct(Student::getSchool).distinct(Student::getLevel).toLists(); <span class=\"comment\">// 先根据学校名去除重复再根据级别去除重复</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、简单分组聚合相关\"><a href=\"#5、简单分组聚合相关\" class=\"headerlink\" title=\"5、简单分组聚合相关\"></a>5、简单分组聚合相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JDFrame&lt;Student&gt; frame = JDFrame.from(studentList);</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,sum(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, BigDecimal&gt;&gt; a = frame.groupBySum(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,max(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Integer&gt;&gt; a2 = frame.groupByMaxValue(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">//  与 groupByMaxValue 含义一致，只是返回的是最大的值对象</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Student&gt;&gt; a3 = frame.groupByMax(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,min(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Integer&gt;&gt; a4 = frame.groupByMinValue(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,count(*) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Long&gt;&gt; a5 = frame.groupByCount(Student::getSchool).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,avg(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, BigDecimal&gt;&gt; a6 = frame.groupByAvg(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,sum(age),count(age) group by school</span></span><br><span class=\"line\">List&lt;FI3&lt;String, BigDecimal, Long&gt;&gt; a7 = frame.groupBySumCount(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// (二级分组)等价于 select school,level,sum(age),count(age) group by school,level</span></span><br><span class=\"line\">List&lt;FI3&lt;String, String, BigDecimal&gt;&gt; a8 = frame.groupBySum(Student::getSchool, Student::getLevel, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// （三级分组）等价于 select school,level,name,sum(age),count(age) group by school,level,name</span></span><br><span class=\"line\">List&lt;FI4&lt;String, String, String, BigDecimal&gt;&gt; a9 = frame.groupBySum(Student::getSchool, Student::getLevel, Student::getName, Student::getAge).toLists();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、排序相关\"><a href=\"#6、排序相关\" class=\"headerlink\" title=\"6、排序相关\"></a>6、排序相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 等价于 order by age desc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortDesc(Student::getAge);</span><br><span class=\"line\"><span class=\"comment\">//  等价于 order by age desc, level asc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortDesc(Student::getAge).sortAsc(Student::getLevel);</span><br><span class=\"line\"><span class=\"comment\">// 等价于 order by age asc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortAsc(Student::getAge);</span><br><span class=\"line\"><span class=\"comment\">// 使用Comparator 排序</span></span><br><span class=\"line\">SDFrame.read(studentList).sortAsc(Comparator.comparing(e -&gt; e.getLevel() + e.getId()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7、连接矩阵相关\"><a href=\"#7、连接矩阵相关\" class=\"headerlink\" title=\"7、连接矩阵相关\"></a>7、连接矩阵相关</h3><p>1、API列表  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">append(T t);                    <span class=\"comment\">// 等价于集合 add</span></span><br><span class=\"line\">union(IFrame&lt;T&gt; other);         <span class=\"comment\">//  等价于集合 addAll</span></span><br><span class=\"line\">join(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);   <span class=\"comment\">// 等价于 sql内连接</span></span><br><span class=\"line\">leftJoin(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);   <span class=\"comment\">// 等价于sql左连接，如果左连接失败，K值为null，需手动判断</span></span><br><span class=\"line\">rightJoin(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);    <span class=\"comment\">// 等价于sql右连接，如果右连接失败，T值为null，需手动判断</span></span><br></pre></td></tr></table></figure>\n\n<p>2、内连接例子<br>下面类似于：<code>select a.*,b.* from sdf a inner join sdf2 b on  a.school = b.c1</code>。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 矩阵1 =======&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">SDFrame&lt;Student&gt; sdf = SDFrame.read(studentList);</span><br><span class=\"line\"></span><br><span class=\"line\">sdf.show(<span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取学生年龄在9到16岁的学学校合计分数最高的前10名</span></span><br><span class=\"line\">SDFrame&lt;FI2&lt;String, BigDecimal&gt;&gt; sdf2 = SDFrame.read(studentList)</span><br><span class=\"line\">        .whereNotNull(Student::getAge)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">9</span>,<span class=\"number\">16</span>)</span><br><span class=\"line\">        .groupBySum(Student::getSchool, Student::getScore)</span><br><span class=\"line\">        .sortDesc(FI2::getC2)</span><br><span class=\"line\">        .cutFirst(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 矩阵2 =======&quot;</span>);</span><br><span class=\"line\">sdf2.show();</span><br><span class=\"line\"></span><br><span class=\"line\">SDFrame&lt;UserInfo&gt; frame = sdf.join(sdf2, (a, b) -&gt; a.getSchool().equals(b.getC1()), (a, b) -&gt; &#123;</span><br><span class=\"line\">    <span class=\"type\">UserInfo</span> <span class=\"variable\">userInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">UserInfo</span>();</span><br><span class=\"line\">    userInfo.setKey1(a.getSchool());</span><br><span class=\"line\">    userInfo.setKey2(b.getC2().intValue());</span><br><span class=\"line\">    userInfo.setKey3(String.valueOf(a.getId()));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> userInfo;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 连接后结果 =======&quot;</span>);</span><br><span class=\"line\">frame.show(<span class=\"number\">5</span>);</span><br></pre></td></tr></table></figure>\n<p>输出信息：  </p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 矩阵<span class=\"number\">1</span> <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>          </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>          </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>          </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 矩阵<span class=\"number\">2</span> <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">c1 c2 </span><br><span class=\"line\">三中 <span class=\"number\">10</span> </span><br><span class=\"line\">二中 <span class=\"number\">7</span>  </span><br><span class=\"line\">一中 <span class=\"number\">4</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 连接后结果 <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">key1 key2 key3 key4 </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">1</span>         </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">2</span>         </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">3</span>         </span><br><span class=\"line\">二中   <span class=\"number\">7</span>    <span class=\"number\">4</span>         </span><br><span class=\"line\">二中   <span class=\"number\">7</span>    <span class=\"number\">5</span>   </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、百分数转换\"><a href=\"#8、百分数转换\" class=\"headerlink\" title=\"8、百分数转换\"></a>8、百分数转换</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 等价于 select round(score*100,2) from student</span></span><br><span class=\"line\">SDFrame&lt;Student&gt; map2 = SDFrame.read(studentList).mapPercent(Student::getScore, Student::setScore,<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9、分区\"><a href=\"#9、分区\" class=\"headerlink\" title=\"9、分区\"></a>9、分区</h3><p>将每个5个元素分成一个小集合，用于将大任务拆成小任务。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;List&lt;Student&gt;&gt; t = SDFrame.read(studentList).partition(<span class=\"number\">5</span>).toLists();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10、生成序号\"><a href=\"#10、生成序号\" class=\"headerlink\" title=\"10、生成序号\"></a>10、生成序号</h3><p>按照age排序，然后根据当前顺序生成排序号到rank字段（序号从0开始）。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame.read(studentList)</span><br><span class=\"line\">    .sortDesc(Student::getAge)</span><br><span class=\"line\">    .addSortNoCol(Student::setRank)</span><br><span class=\"line\">    .show(<span class=\"number\">30</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>     <span class=\"number\">0</span>    </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>     <span class=\"number\">1</span>    </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>     <span class=\"number\">3</span>    </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     三年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>     <span class=\"number\">4</span>    </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">6</span>   </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11、生成排名号\"><a href=\"#11、生成排名号\" class=\"headerlink\" title=\"11、生成排名号\"></a>11、生成排名号</h3><p>按照age降序排序，然后根据当前顺序生成排名号到rank字段 （排名从0开始）。<br>与序号不同的是， 排名是如果值相同认为排名一样。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame&lt;Student&gt; df = SDFrame.read(studentList).addRankingSameColDesc(Student::getAge, Student::setRank);</span><br><span class=\"line\">df.show(<span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>     <span class=\"number\">1</span>    </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>     <span class=\"number\">3</span>    </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>     <span class=\"number\">4</span>    </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12、补充条目\"><a href=\"#12、补充条目\" class=\"headerlink\" title=\"12、补充条目\"></a>12、补充条目</h3><p>1、补充缺失的学校条目  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 所有需要的学校条目</span></span><br><span class=\"line\">List&lt;String&gt; allDim = Arrays.asList(<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;四中&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 根据学校字段和allDim比较去补充缺失的条目， 缺失的学校按照ReplenishFunction生成补充条目作为结果一起返回</span></span><br><span class=\"line\">SDFrame.read(studentList).replenish(Student::getSchool,allDim,(school) -&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(school)).show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>          </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>          </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>          </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">0</span>       四中  </span><br></pre></td></tr></table></figure>\n\n\n","more":"<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"一、快速开始\"><a href=\"#一、快速开始\" class=\"headerlink\" title=\"一、快速开始\"></a>一、快速开始</h1><p><a href=\"https://github.com/burukeYou/JDFrame\">代码地址</a>&#x2F;<a href=\"https://central.sonatype.com/artifact/io.github.burukeyou/jdframe\">Maven依赖地址</a><br>提供了两种Frame，SDFrame和JDFrame 在API层面一模一样， 区别是JDFrame的所有操作实时生效， 无需要重新read生成，而SDFrame与stream流一致，只有执行终止操作才会生效，并且需要重新read生成流， 而且在同一个流之间的操作是互相影响的。<br>如果只是需要流式操作一条流执行完就用SDFrame， 如果需要“中间站点”数据，然后从“中间站点数据“开始计算就用JDFrame， 这个在含义层面与DataFrame模型类似。<br>依赖：  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.burukeyou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jdframe<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>1、案例<br>统计每个学校的里学生年龄不为空并且年龄在9到16岁间的合计分数，并且获取合计分前2名的学校。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 实体类</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String school;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String level;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> BigDecimal score;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer rank;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Student</span><span class=\"params\">(String level, BigDecimal score)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.level = level;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.score = score;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Student</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, String school, String level, Integer age, BigDecimal score)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.school = school;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.level = level;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.score = score;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 下面是操作伪代码</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> List&lt;Student&gt; studentList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">1</span>,<span class=\"string\">&quot;a&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">11</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">1</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">2</span>,<span class=\"string\">&quot;a&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">11</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">1</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">3</span>,<span class=\"string\">&quot;b&quot;</span>,<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;三年级&quot;</span>,<span class=\"number\">12</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">2</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">4</span>,<span class=\"string\">&quot;c&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">13</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">3</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">5</span>,<span class=\"string\">&quot;d&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;一年级&quot;</span>,<span class=\"number\">14</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">4</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">6</span>,<span class=\"string\">&quot;e&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;二年级&quot;</span>,<span class=\"number\">14</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">5</span>)));</span><br><span class=\"line\">    studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"number\">7</span>,<span class=\"string\">&quot;e&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;二年级&quot;</span>,<span class=\"number\">15</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">5</span>)));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 等价于SQL:</span></span><br><span class=\"line\"><span class=\"comment\">// select school,sum(score)  </span></span><br><span class=\"line\"><span class=\"comment\">// from students</span></span><br><span class=\"line\"><span class=\"comment\">// where age is not null and age &gt;=9 and age &lt;= 16</span></span><br><span class=\"line\"><span class=\"comment\">// group by school</span></span><br><span class=\"line\"><span class=\"comment\">// order by sum(score) desc</span></span><br><span class=\"line\"><span class=\"comment\">// limit 2</span></span><br><span class=\"line\">SDFrame&lt;FI2&lt;String, BigDecimal&gt;&gt; sdf2 = SDFrame.read(studentList)</span><br><span class=\"line\">        .whereNotNull(Student::getAge)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">9</span>,<span class=\"number\">16</span>)</span><br><span class=\"line\">        .groupBySum(Student::getSchool, Student::getScore)</span><br><span class=\"line\">        .sortDesc(FI2::getC2)</span><br><span class=\"line\">        .cutFirst(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">sdf2.show();</span><br></pre></td></tr></table></figure>\n<p>输出信息：  </p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">c</span><span class=\"number\">1</span>  <span class=\"keyword\">c</span><span class=\"number\">2</span> </span><br><span class=\"line\">三中 <span class=\"number\">10</span> </span><br><span class=\"line\">二中 <span class=\"number\">7</span></span><br></pre></td></tr></table></figure>\n\n\n\n<br/>\n\n\n<hr>\n<br/>\n\n\n<h1 id=\"二、API介绍\"><a href=\"#二、API介绍\" class=\"headerlink\" title=\"二、API介绍\"></a>二、API介绍</h1><h3 id=\"1、矩阵信息相关\"><a href=\"#1、矩阵信息相关\" class=\"headerlink\" title=\"1、矩阵信息相关\"></a>1、矩阵信息相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">show</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>; <span class=\"comment\">// 打印矩阵信息到控制台</span></span><br><span class=\"line\">List&lt;String&gt; <span class=\"title function_\">columns</span><span class=\"params\">()</span>;   <span class=\"comment\">// 获取矩阵的表头字段名</span></span><br><span class=\"line\">List&lt;R&gt; <span class=\"title function_\">col</span><span class=\"params\">(Function&lt;T, R&gt; function)</span>;   <span class=\"comment\">// 获取矩阵某一列值</span></span><br><span class=\"line\">T <span class=\"title function_\">head</span><span class=\"params\">()</span>;                   <span class=\"comment\">// 获取第一个元素</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">head</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>;          <span class=\"comment\">// 获取前n个元素</span></span><br><span class=\"line\">T <span class=\"title function_\">tail</span><span class=\"params\">()</span>;                       <span class=\"comment\">// 获取最后一个元素</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">tail</span><span class=\"params\">(<span class=\"type\">int</span> n)</span>;            <span class=\"comment\">// 获取后n个元素</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、筛选相关\"><a href=\"#2、筛选相关\" class=\"headerlink\" title=\"2、筛选相关\"></a>2、筛选相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame.read(studentList)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>) <span class=\"comment\">// 过滤年龄在[3，6]岁的</span></span><br><span class=\"line\">        .whereBetweenR(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>) <span class=\"comment\">// 过滤年龄在(3，6]岁的, 不含3岁</span></span><br><span class=\"line\">        .whereBetweenL(Student::getAge,<span class=\"number\">3</span>,<span class=\"number\">6</span>)      <span class=\"comment\">// 过滤年龄在[3，6)岁的, 不含6岁</span></span><br><span class=\"line\">        .whereNotNull(Student::getName) <span class=\"comment\">// 过滤名字不为空的数据， 兼容了空字符串&#x27;&#x27;的判断</span></span><br><span class=\"line\">        .whereGt(Student::getAge,<span class=\"number\">3</span>)    <span class=\"comment\">// 过滤年龄大于3岁</span></span><br><span class=\"line\">        .whereGe(Student::getAge,<span class=\"number\">3</span>)   <span class=\"comment\">// 过滤年龄大于等于3岁</span></span><br><span class=\"line\">        .whereLt(Student::getAge,<span class=\"number\">3</span>)  <span class=\"comment\">// 过滤年龄小于3岁的</span></span><br><span class=\"line\">        .whereIn(Student::getAge, Arrays.asList(<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"comment\">// 过滤年龄为3岁 或者7岁 或者 8岁的数据</span></span><br><span class=\"line\">        .whereNotIn(Student::getAge, Arrays.asList(<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"comment\">// 过滤年龄不为为3岁 或者7岁 或者 8岁的数据</span></span><br><span class=\"line\">        .whereEq(Student::getAge,<span class=\"number\">3</span>) <span class=\"comment\">// 过滤年龄等于3岁的数据</span></span><br><span class=\"line\">        .whereNotEq(Student::getAge,<span class=\"number\">3</span>) <span class=\"comment\">// 过滤年龄不等于3岁的数据</span></span><br><span class=\"line\">        .whereLike(Student::getName,<span class=\"string\">&quot;jay&quot;</span>) <span class=\"comment\">// 模糊查询，等价于 like &quot;%jay%&quot;</span></span><br><span class=\"line\">        .whereLikeLeft(Student::getName,<span class=\"string\">&quot;jay&quot;</span>) <span class=\"comment\">// 模糊查询，等价于 like &quot;jay%&quot;</span></span><br><span class=\"line\">        .whereLikeRight(Student::getName,<span class=\"string\">&quot;jay&quot;</span>); <span class=\"comment\">// 模糊查询，等价于 like &quot;%jay&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、汇总相关\"><a href=\"#3、汇总相关\" class=\"headerlink\" title=\"3、汇总相关\"></a>3、汇总相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JDFrame&lt;Student&gt; frame = JDFrame.read(studentList);</span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">s1</span> <span class=\"operator\">=</span> frame.max(Student::getAge);<span class=\"comment\">// 获取年龄最大的学生</span></span><br><span class=\"line\"><span class=\"type\">Integer</span> <span class=\"variable\">s2</span>  <span class=\"operator\">=</span> frame.maxValue(Student::getAge);      <span class=\"comment\">// 获取学生里最大的年龄</span></span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">s3</span> <span class=\"operator\">=</span> frame.min(Student::getAge);<span class=\"comment\">// 获取年龄最小的学生</span></span><br><span class=\"line\"><span class=\"type\">Integer</span> <span class=\"variable\">s4</span>  <span class=\"operator\">=</span> frame.minValue(Student::getAge);      <span class=\"comment\">// 获取学生里最小的年龄</span></span><br><span class=\"line\"><span class=\"type\">BigDecimal</span> <span class=\"variable\">s5</span> <span class=\"operator\">=</span> frame.avg(Student::getAge); <span class=\"comment\">// 获取所有学生的年龄的平均值</span></span><br><span class=\"line\"><span class=\"type\">BigDecimal</span> <span class=\"variable\">s6</span> <span class=\"operator\">=</span> frame.sum(Student::getAge); <span class=\"comment\">// 获取所有学生的年龄合计</span></span><br><span class=\"line\">MaxMin&lt;Student&gt; s7 = frame.maxMin(Student::getAge); <span class=\"comment\">// 同时获取年龄最大和最小的学生</span></span><br><span class=\"line\">MaxMin&lt;Integer&gt; s8 = frame.maxMinValue(Student::getAge); <span class=\"comment\">// 同时获取学生里最大和最小的年龄</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、去重相关\"><a href=\"#4、去重相关\" class=\"headerlink\" title=\"4、去重相关\"></a>4、去重相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Student&gt; std = <span class=\"literal\">null</span>;</span><br><span class=\"line\">std = SDFrame.read(studentList).distinct().toLists(); <span class=\"comment\">// 根据对象hashCode去重</span></span><br><span class=\"line\">std = SDFrame.read(studentList).distinct(Student::getSchool).toLists(); <span class=\"comment\">// 根据学校名去重</span></span><br><span class=\"line\">std = SDFrame.read(studentList).distinct(e -&gt; e.getSchool() + e.getLevel()).toLists(); <span class=\"comment\">// 根据学校名拼接级别去重复</span></span><br><span class=\"line\">std =SDFrame.read(studentList).distinct(Student::getSchool).distinct(Student::getLevel).toLists(); <span class=\"comment\">// 先根据学校名去除重复再根据级别去除重复</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、简单分组聚合相关\"><a href=\"#5、简单分组聚合相关\" class=\"headerlink\" title=\"5、简单分组聚合相关\"></a>5、简单分组聚合相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JDFrame&lt;Student&gt; frame = JDFrame.from(studentList);</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,sum(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, BigDecimal&gt;&gt; a = frame.groupBySum(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,max(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Integer&gt;&gt; a2 = frame.groupByMaxValue(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">//  与 groupByMaxValue 含义一致，只是返回的是最大的值对象</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Student&gt;&gt; a3 = frame.groupByMax(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,min(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Integer&gt;&gt; a4 = frame.groupByMinValue(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,count(*) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, Long&gt;&gt; a5 = frame.groupByCount(Student::getSchool).toLists();</span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,avg(age) ... group by school</span></span><br><span class=\"line\">List&lt;FI2&lt;String, BigDecimal&gt;&gt; a6 = frame.groupByAvg(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 等价于 select school,sum(age),count(age) group by school</span></span><br><span class=\"line\">List&lt;FI3&lt;String, BigDecimal, Long&gt;&gt; a7 = frame.groupBySumCount(Student::getSchool, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// (二级分组)等价于 select school,level,sum(age),count(age) group by school,level</span></span><br><span class=\"line\">List&lt;FI3&lt;String, String, BigDecimal&gt;&gt; a8 = frame.groupBySum(Student::getSchool, Student::getLevel, Student::getAge).toLists();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// （三级分组）等价于 select school,level,name,sum(age),count(age) group by school,level,name</span></span><br><span class=\"line\">List&lt;FI4&lt;String, String, String, BigDecimal&gt;&gt; a9 = frame.groupBySum(Student::getSchool, Student::getLevel, Student::getName, Student::getAge).toLists();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、排序相关\"><a href=\"#6、排序相关\" class=\"headerlink\" title=\"6、排序相关\"></a>6、排序相关</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 等价于 order by age desc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortDesc(Student::getAge);</span><br><span class=\"line\"><span class=\"comment\">//  等价于 order by age desc, level asc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortDesc(Student::getAge).sortAsc(Student::getLevel);</span><br><span class=\"line\"><span class=\"comment\">// 等价于 order by age asc</span></span><br><span class=\"line\">SDFrame.read(studentList).sortAsc(Student::getAge);</span><br><span class=\"line\"><span class=\"comment\">// 使用Comparator 排序</span></span><br><span class=\"line\">SDFrame.read(studentList).sortAsc(Comparator.comparing(e -&gt; e.getLevel() + e.getId()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7、连接矩阵相关\"><a href=\"#7、连接矩阵相关\" class=\"headerlink\" title=\"7、连接矩阵相关\"></a>7、连接矩阵相关</h3><p>1、API列表  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">append(T t);                    <span class=\"comment\">// 等价于集合 add</span></span><br><span class=\"line\">union(IFrame&lt;T&gt; other);         <span class=\"comment\">//  等价于集合 addAll</span></span><br><span class=\"line\">join(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);   <span class=\"comment\">// 等价于 sql内连接</span></span><br><span class=\"line\">leftJoin(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);   <span class=\"comment\">// 等价于sql左连接，如果左连接失败，K值为null，需手动判断</span></span><br><span class=\"line\">rightJoin(IFrame&lt;K&gt; other, JoinOn&lt;T,K&gt; on, Join&lt;T,K,R&gt; join);    <span class=\"comment\">// 等价于sql右连接，如果右连接失败，T值为null，需手动判断</span></span><br></pre></td></tr></table></figure>\n\n<p>2、内连接例子<br>下面类似于：<code>select a.*,b.* from sdf a inner join sdf2 b on  a.school = b.c1</code>。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 矩阵1 =======&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">SDFrame&lt;Student&gt; sdf = SDFrame.read(studentList);</span><br><span class=\"line\"></span><br><span class=\"line\">sdf.show(<span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取学生年龄在9到16岁的学学校合计分数最高的前10名</span></span><br><span class=\"line\">SDFrame&lt;FI2&lt;String, BigDecimal&gt;&gt; sdf2 = SDFrame.read(studentList)</span><br><span class=\"line\">        .whereNotNull(Student::getAge)</span><br><span class=\"line\">        .whereBetween(Student::getAge,<span class=\"number\">9</span>,<span class=\"number\">16</span>)</span><br><span class=\"line\">        .groupBySum(Student::getSchool, Student::getScore)</span><br><span class=\"line\">        .sortDesc(FI2::getC2)</span><br><span class=\"line\">        .cutFirst(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 矩阵2 =======&quot;</span>);</span><br><span class=\"line\">sdf2.show();</span><br><span class=\"line\"></span><br><span class=\"line\">SDFrame&lt;UserInfo&gt; frame = sdf.join(sdf2, (a, b) -&gt; a.getSchool().equals(b.getC1()), (a, b) -&gt; &#123;</span><br><span class=\"line\">    <span class=\"type\">UserInfo</span> <span class=\"variable\">userInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">UserInfo</span>();</span><br><span class=\"line\">    userInfo.setKey1(a.getSchool());</span><br><span class=\"line\">    userInfo.setKey2(b.getC2().intValue());</span><br><span class=\"line\">    userInfo.setKey3(String.valueOf(a.getId()));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> userInfo;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;======== 连接后结果 =======&quot;</span>);</span><br><span class=\"line\">frame.show(<span class=\"number\">5</span>);</span><br></pre></td></tr></table></figure>\n<p>输出信息：  </p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 矩阵<span class=\"number\">1</span> <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>          </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>          </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>          </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 矩阵<span class=\"number\">2</span> <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">c1 c2 </span><br><span class=\"line\">三中 <span class=\"number\">10</span> </span><br><span class=\"line\">二中 <span class=\"number\">7</span>  </span><br><span class=\"line\">一中 <span class=\"number\">4</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 连接后结果 <span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\">key1 key2 key3 key4 </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">1</span>         </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">2</span>         </span><br><span class=\"line\">一中   <span class=\"number\">4</span>    <span class=\"number\">3</span>         </span><br><span class=\"line\">二中   <span class=\"number\">7</span>    <span class=\"number\">4</span>         </span><br><span class=\"line\">二中   <span class=\"number\">7</span>    <span class=\"number\">5</span>   </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、百分数转换\"><a href=\"#8、百分数转换\" class=\"headerlink\" title=\"8、百分数转换\"></a>8、百分数转换</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 等价于 select round(score*100,2) from student</span></span><br><span class=\"line\">SDFrame&lt;Student&gt; map2 = SDFrame.read(studentList).mapPercent(Student::getScore, Student::setScore,<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9、分区\"><a href=\"#9、分区\" class=\"headerlink\" title=\"9、分区\"></a>9、分区</h3><p>将每个5个元素分成一个小集合，用于将大任务拆成小任务。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;List&lt;Student&gt;&gt; t = SDFrame.read(studentList).partition(<span class=\"number\">5</span>).toLists();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10、生成序号\"><a href=\"#10、生成序号\" class=\"headerlink\" title=\"10、生成序号\"></a>10、生成序号</h3><p>按照age排序，然后根据当前顺序生成排序号到rank字段（序号从0开始）。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame.read(studentList)</span><br><span class=\"line\">    .sortDesc(Student::getAge)</span><br><span class=\"line\">    .addSortNoCol(Student::setRank)</span><br><span class=\"line\">    .show(<span class=\"number\">30</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>     <span class=\"number\">0</span>    </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>     <span class=\"number\">1</span>    </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>     <span class=\"number\">3</span>    </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     三年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>     <span class=\"number\">4</span>    </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">6</span>   </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11、生成排名号\"><a href=\"#11、生成排名号\" class=\"headerlink\" title=\"11、生成排名号\"></a>11、生成排名号</h3><p>按照age降序排序，然后根据当前顺序生成排名号到rank字段 （排名从0开始）。<br>与序号不同的是， 排名是如果值相同认为排名一样。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SDFrame&lt;Student&gt; df = SDFrame.read(studentList).addRankingSameColDesc(Student::getAge, Student::setRank);</span><br><span class=\"line\">df.show(<span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>     <span class=\"number\">1</span>    </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>     <span class=\"number\">2</span>    </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>     <span class=\"number\">3</span>    </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>     <span class=\"number\">4</span>    </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>     <span class=\"number\">5</span>    </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12、补充条目\"><a href=\"#12、补充条目\" class=\"headerlink\" title=\"12、补充条目\"></a>12、补充条目</h3><p>1、补充缺失的学校条目  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 所有需要的学校条目</span></span><br><span class=\"line\">List&lt;String&gt; allDim = Arrays.asList(<span class=\"string\">&quot;一中&quot;</span>,<span class=\"string\">&quot;二中&quot;</span>,<span class=\"string\">&quot;三中&quot;</span>,<span class=\"string\">&quot;四中&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 根据学校字段和allDim比较去补充缺失的条目， 缺失的学校按照ReplenishFunction生成补充条目作为结果一起返回</span></span><br><span class=\"line\">SDFrame.read(studentList).replenish(Student::getSchool,allDim,(school) -&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(school)).show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出信息</span></span><br><span class=\"line\">id name school level age score rank </span><br><span class=\"line\"><span class=\"number\">1</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">2</span>  a    一中     一年级   <span class=\"number\">11</span>  <span class=\"number\">1</span>          </span><br><span class=\"line\"><span class=\"number\">3</span>  b    一中     一年级   <span class=\"number\">12</span>  <span class=\"number\">2</span>          </span><br><span class=\"line\"><span class=\"number\">4</span>  c    二中     一年级   <span class=\"number\">13</span>  <span class=\"number\">3</span>          </span><br><span class=\"line\"><span class=\"number\">5</span>  d    二中     一年级   <span class=\"number\">14</span>  <span class=\"number\">4</span>          </span><br><span class=\"line\"><span class=\"number\">6</span>  e    三中     二年级   <span class=\"number\">14</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">7</span>  e    三中     二年级   <span class=\"number\">15</span>  <span class=\"number\">5</span>          </span><br><span class=\"line\"><span class=\"number\">0</span>       四中  </span><br></pre></td></tr></table></figure>\n\n\n","categories":[{"name":"工作技能","path":"api/categories/工作技能.json"}],"tags":[{"name":"工作技能","path":"api/tags/工作技能.json"},{"name":"后端","path":"api/tags/后端.json"},{"name":"Java","path":"api/tags/Java.json"}]}