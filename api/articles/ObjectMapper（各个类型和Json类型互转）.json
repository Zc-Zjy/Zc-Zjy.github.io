{"title":"ObjectMapper（各个类型和Json类型互转）","slug":"ObjectMapper（各个类型和Json类型互转）","date":"2023-10-07T09:48:56.000Z","updated":"2024-07-12T07:43:37.594Z","comments":true,"path":"api/articles/ObjectMapper（各个类型和Json类型互转）.json","realPath":null,"excerpt":null,"covers":null,"cover":null,"content":"<br/>\n\n<hr>\n<br/>\n\n<h1 id=\"一、ObjectMapper（各个类型和Json类型互转）\"><a href=\"#一、ObjectMapper（各个类型和Json类型互转）\" class=\"headerlink\" title=\"一、ObjectMapper（各个类型和Json类型互转）\"></a>一、ObjectMapper（各个类型和Json类型互转）</h1><p><strong>说明：</strong><code>ObjectMapper</code>类<code>(com.fasterxml.jackson.databind.ObjectMapper)</code>是<code>Jackson</code>的主要类，它可以帮助我们快速的进行各个类型和Json类型的相互转换。  </p>\n<h3 id=\"1、使用\"><a href=\"#1、使用\" class=\"headerlink\" title=\"1、使用\"></a>1、使用</h3><p>（1）引入Jackson的依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 根据自己需要引入相关版本依赖。 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-databind<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-annotations<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、ObjectMapper的常用配置\"><a href=\"#2、ObjectMapper的常用配置\" class=\"headerlink\" title=\"2、ObjectMapper的常用配置\"></a>2、<code>ObjectMapper</code>的常用配置</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ObjectMapper mapper;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ObjectMapper <span class=\"title function_\">getObjectMapper</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.mapper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">static</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//创建ObjectMapper对象</span></span><br><span class=\"line\">    mapper = <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>()</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//configure方法 配置一些需要的参数</span></span><br><span class=\"line\">    <span class=\"comment\">// 转换为格式化的json 显示出来的格式美化</span></span><br><span class=\"line\">    mapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//序列化的时候序列对象的那些属性  </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_DEFAULT 属性为默认值不序列化 </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.ALWAYS      所有属性</span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_EMPTY   属性为 空（“”） 或者为 NULL 都不序列化 </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_NULL    属性为NULL 不序列化</span></span><br><span class=\"line\">   mapper.setSerializationInclusion(JsonInclude.Include.ALWAYS);  </span><br><span class=\"line\"> </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">//反序列化时,遇到未知属性会不会报错 </span></span><br><span class=\"line\">    <span class=\"comment\">//true - 遇到没有的属性就报错 false - 没有的属性不会管，不会报错</span></span><br><span class=\"line\">    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class=\"literal\">false</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//如果是空对象的时候,不抛异常  </span></span><br><span class=\"line\">    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, <span class=\"literal\">false</span>);  </span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// 忽略 transient 修饰的属性</span></span><br><span class=\"line\">    mapper.configure(MapperFeature.PROPAGATE_TRANSIENT_MARKER, <span class=\"literal\">true</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//修改序列化后日期格式</span></span><br><span class=\"line\">    mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class=\"literal\">false</span>);  </span><br><span class=\"line\">    mapper.setDateFormat(<span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//处理不同的时区偏移格式</span></span><br><span class=\"line\">   mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class=\"line\">   mapper.registerModule(<span class=\"keyword\">new</span> <span class=\"title class_\">JavaTimeModule</span>());</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、ObjectMapper的常用方法\"><a href=\"#3、ObjectMapper的常用方法\" class=\"headerlink\" title=\"3、ObjectMapper的常用方法\"></a>3、<code>ObjectMapper</code>的常用方法</h3><h6 id=\"（1）json字符串转对象\"><a href=\"#（1）json字符串转对象\" class=\"headerlink\" title=\"（1）json字符串转对象\"></a>（1）json字符串转对象</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ObjectMapper</span> <span class=\"variable\">mapper</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonString</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&#123;\\&quot;name\\&quot;:\\&quot;Hyl\\&quot;, \\&quot;age\\&quot;:20&#125;&quot;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//将字符串转换为对象</span></span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> mapper.readValue(jsonString, Student.class);</span><br><span class=\"line\">System.out.println(student); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//将对象转换为json字符串</span></span><br><span class=\"line\">jsonString = mapper.writeValueAsString(student);</span><br><span class=\"line\">System.out.println(jsonString); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">Student [ name: Hyl, age: <span class=\"number\">20</span> ]</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;Hyl&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（2）数组和对象之间转换\"><a href=\"#（2）数组和对象之间转换\" class=\"headerlink\" title=\"（2）数组和对象之间转换\"></a>（2）数组和对象之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//对象转为byte数组</span></span><br><span class=\"line\"><span class=\"type\">byte</span>[] byteArr = mapper.writeValueAsBytes(student);</span><br><span class=\"line\">System.out.println(byteArr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//byte数组转为对象</span></span><br><span class=\"line\">Student student= mapper.readValue(byteArr, Student.class);</span><br><span class=\"line\">System.out.println(student); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">[B@3327bd23</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">Student [ name: Hyl, age: <span class=\"number\">20</span> ]</span><br></pre></td></tr></table></figure>\n<h6 id=\"（3）集合和json字符串之间转换\"><a href=\"#（3）集合和json字符串之间转换\" class=\"headerlink\" title=\"（3）集合和json字符串之间转换\"></a>（3）集合和json字符串之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Student&gt; studentList= <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl1&quot;</span> ,<span class=\"number\">20</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl2&quot;</span> ,<span class=\"number\">21</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl3&quot;</span> ,<span class=\"number\">22</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl4&quot;</span> ,<span class=\"number\">23</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(studentList);</span><br><span class=\"line\">System.out.println(jsonStr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\">        </span><br><span class=\"line\">List&lt;Student&gt; studentList2 = mapper.readValue(jsonStr, List.class);</span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;字符串转集合：&quot;</span> + studentList2 ); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">[ &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl1&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl2&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">21</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl3&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">22</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl4&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">23</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125; ]</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">[</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tname=hyl1, </span><br><span class=\"line\">\t\tage=<span class=\"number\">20</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl2, </span><br><span class=\"line\">\t\tage=<span class=\"number\">21</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl3, </span><br><span class=\"line\">\t\tage=<span class=\"number\">22</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl4, </span><br><span class=\"line\">\t\tage=<span class=\"number\">23</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h6 id=\"（4）map和json字符串之间转换\"><a href=\"#（4）map和json字符串之间转换\" class=\"headerlink\" title=\"（4）map和json字符串之间转换\"></a>（4）map和json字符串之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String, Object&gt; testMap = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;22&quot;</span>);</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;age&quot;</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;date&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;student&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl&quot;</span>, <span class=\"number\">20</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(testMap);</span><br><span class=\"line\">System.out.println(jsonStr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\">Map&lt;String, Object&gt; testMapDes = mapper.readValue(jsonStr, Map.class);</span><br><span class=\"line\">System.out.println(testMapDes); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;date&quot;</span> : <span class=\"number\">1525164212803</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;22&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;student&quot;</span> : &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;intList&quot;</span> : <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">&#123;date=<span class=\"number\">1525164212803</span>, name=<span class=\"number\">22</span>, student=&#123;name=hyl, age=<span class=\"number\">20</span>, sendTime=<span class=\"number\">1525164212803</span>, intList=<span class=\"literal\">null</span>&#125;, age=<span class=\"number\">20</span>&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（5）日期转json字符串\"><a href=\"#（5）日期转json字符串\" class=\"headerlink\" title=\"（5）日期转json字符串\"></a>（5）日期转json字符串</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 修改时间格式</span></span><br><span class=\"line\">mapper.setDateFormat(<span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));</span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span> (<span class=\"string\">&quot;hyl&quot;</span>,<span class=\"number\">21</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">student.setIntList(Arrays.asList(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(student);</span><br><span class=\"line\">System.out.println(jsonStr);</span><br><span class=\"line\"> </span><br><span class=\"line\">结果：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">21</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"string\">&quot;2020-07-23 13:14:36&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;intList&quot;</span> : [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（6）Object类型转list\"><a href=\"#（6）Object类型转list\" class=\"headerlink\" title=\"（6）Object类型转list\"></a>（6）Object类型转list</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ObjectMapper</span> <span class=\"variable\">objectMapper</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> objectMapper.writeValueAsString(object); <span class=\"comment\">// object是Object类型</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> objectMapper.readValue(json, List.class);</span><br></pre></td></tr></table></figure>","more":"<br/>\n\n<hr>\n<br/>\n\n<h1 id=\"一、ObjectMapper（各个类型和Json类型互转）\"><a href=\"#一、ObjectMapper（各个类型和Json类型互转）\" class=\"headerlink\" title=\"一、ObjectMapper（各个类型和Json类型互转）\"></a>一、ObjectMapper（各个类型和Json类型互转）</h1><p><strong>说明：</strong><code>ObjectMapper</code>类<code>(com.fasterxml.jackson.databind.ObjectMapper)</code>是<code>Jackson</code>的主要类，它可以帮助我们快速的进行各个类型和Json类型的相互转换。  </p>\n<h3 id=\"1、使用\"><a href=\"#1、使用\" class=\"headerlink\" title=\"1、使用\"></a>1、使用</h3><p>（1）引入Jackson的依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 根据自己需要引入相关版本依赖。 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-databind<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-annotations<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、ObjectMapper的常用配置\"><a href=\"#2、ObjectMapper的常用配置\" class=\"headerlink\" title=\"2、ObjectMapper的常用配置\"></a>2、<code>ObjectMapper</code>的常用配置</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ObjectMapper mapper;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ObjectMapper <span class=\"title function_\">getObjectMapper</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.mapper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">static</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//创建ObjectMapper对象</span></span><br><span class=\"line\">    mapper = <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>()</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//configure方法 配置一些需要的参数</span></span><br><span class=\"line\">    <span class=\"comment\">// 转换为格式化的json 显示出来的格式美化</span></span><br><span class=\"line\">    mapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//序列化的时候序列对象的那些属性  </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_DEFAULT 属性为默认值不序列化 </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.ALWAYS      所有属性</span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_EMPTY   属性为 空（“”） 或者为 NULL 都不序列化 </span></span><br><span class=\"line\">   <span class=\"comment\">//JsonInclude.Include.NON_NULL    属性为NULL 不序列化</span></span><br><span class=\"line\">   mapper.setSerializationInclusion(JsonInclude.Include.ALWAYS);  </span><br><span class=\"line\"> </span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">//反序列化时,遇到未知属性会不会报错 </span></span><br><span class=\"line\">    <span class=\"comment\">//true - 遇到没有的属性就报错 false - 没有的属性不会管，不会报错</span></span><br><span class=\"line\">    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class=\"literal\">false</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//如果是空对象的时候,不抛异常  </span></span><br><span class=\"line\">    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, <span class=\"literal\">false</span>);  </span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// 忽略 transient 修饰的属性</span></span><br><span class=\"line\">    mapper.configure(MapperFeature.PROPAGATE_TRANSIENT_MARKER, <span class=\"literal\">true</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//修改序列化后日期格式</span></span><br><span class=\"line\">    mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class=\"literal\">false</span>);  </span><br><span class=\"line\">    mapper.setDateFormat(<span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//处理不同的时区偏移格式</span></span><br><span class=\"line\">   mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class=\"line\">   mapper.registerModule(<span class=\"keyword\">new</span> <span class=\"title class_\">JavaTimeModule</span>());</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、ObjectMapper的常用方法\"><a href=\"#3、ObjectMapper的常用方法\" class=\"headerlink\" title=\"3、ObjectMapper的常用方法\"></a>3、<code>ObjectMapper</code>的常用方法</h3><h6 id=\"（1）json字符串转对象\"><a href=\"#（1）json字符串转对象\" class=\"headerlink\" title=\"（1）json字符串转对象\"></a>（1）json字符串转对象</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ObjectMapper</span> <span class=\"variable\">mapper</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonString</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&#123;\\&quot;name\\&quot;:\\&quot;Hyl\\&quot;, \\&quot;age\\&quot;:20&#125;&quot;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//将字符串转换为对象</span></span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> mapper.readValue(jsonString, Student.class);</span><br><span class=\"line\">System.out.println(student); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//将对象转换为json字符串</span></span><br><span class=\"line\">jsonString = mapper.writeValueAsString(student);</span><br><span class=\"line\">System.out.println(jsonString); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">Student [ name: Hyl, age: <span class=\"number\">20</span> ]</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;Hyl&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（2）数组和对象之间转换\"><a href=\"#（2）数组和对象之间转换\" class=\"headerlink\" title=\"（2）数组和对象之间转换\"></a>（2）数组和对象之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//对象转为byte数组</span></span><br><span class=\"line\"><span class=\"type\">byte</span>[] byteArr = mapper.writeValueAsBytes(student);</span><br><span class=\"line\">System.out.println(byteArr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//byte数组转为对象</span></span><br><span class=\"line\">Student student= mapper.readValue(byteArr, Student.class);</span><br><span class=\"line\">System.out.println(student); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">[B@3327bd23</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">Student [ name: Hyl, age: <span class=\"number\">20</span> ]</span><br></pre></td></tr></table></figure>\n<h6 id=\"（3）集合和json字符串之间转换\"><a href=\"#（3）集合和json字符串之间转换\" class=\"headerlink\" title=\"（3）集合和json字符串之间转换\"></a>（3）集合和json字符串之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;Student&gt; studentList= <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl1&quot;</span> ,<span class=\"number\">20</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl2&quot;</span> ,<span class=\"number\">21</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl3&quot;</span> ,<span class=\"number\">22</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\">studentList.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl4&quot;</span> ,<span class=\"number\">23</span> , <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(studentList);</span><br><span class=\"line\">System.out.println(jsonStr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\">        </span><br><span class=\"line\">List&lt;Student&gt; studentList2 = mapper.readValue(jsonStr, List.class);</span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;字符串转集合：&quot;</span> + studentList2 ); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">[ &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl1&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl2&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">21</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl3&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">22</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl4&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">23</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span></span><br><span class=\"line\">&#125; ]</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">[</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tname=hyl1, </span><br><span class=\"line\">\t\tage=<span class=\"number\">20</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl2, </span><br><span class=\"line\">\t\tage=<span class=\"number\">21</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl3, </span><br><span class=\"line\">\t\tage=<span class=\"number\">22</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;, &#123;</span><br><span class=\"line\">\t\tname=hyl4, </span><br><span class=\"line\">\t\tage=<span class=\"number\">23</span>, </span><br><span class=\"line\">\t\tsendTime=<span class=\"number\">1525164212803</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h6 id=\"（4）map和json字符串之间转换\"><a href=\"#（4）map和json字符串之间转换\" class=\"headerlink\" title=\"（4）map和json字符串之间转换\"></a>（4）map和json字符串之间转换</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String, Object&gt; testMap = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;22&quot;</span>);</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;age&quot;</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;date&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">testMap.put(<span class=\"string\">&quot;student&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;hyl&quot;</span>, <span class=\"number\">20</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()));</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(testMap);</span><br><span class=\"line\">System.out.println(jsonStr); <span class=\"comment\">// 结果一</span></span><br><span class=\"line\">Map&lt;String, Object&gt; testMapDes = mapper.readValue(jsonStr, Map.class);</span><br><span class=\"line\">System.out.println(testMapDes); <span class=\"comment\">// 结果二</span></span><br><span class=\"line\"> </span><br><span class=\"line\">结果一：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;date&quot;</span> : <span class=\"number\">1525164212803</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;22&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;student&quot;</span> : &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"number\">1525164212803</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;intList&quot;</span> : <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">20</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">结果二：</span><br><span class=\"line\">&#123;date=<span class=\"number\">1525164212803</span>, name=<span class=\"number\">22</span>, student=&#123;name=hyl, age=<span class=\"number\">20</span>, sendTime=<span class=\"number\">1525164212803</span>, intList=<span class=\"literal\">null</span>&#125;, age=<span class=\"number\">20</span>&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（5）日期转json字符串\"><a href=\"#（5）日期转json字符串\" class=\"headerlink\" title=\"（5）日期转json字符串\"></a>（5）日期转json字符串</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 修改时间格式</span></span><br><span class=\"line\">mapper.setDateFormat(<span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));</span><br><span class=\"line\"><span class=\"type\">Student</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span> (<span class=\"string\">&quot;hyl&quot;</span>,<span class=\"number\">21</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">student.setIntList(Arrays.asList(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">jsonStr</span> <span class=\"operator\">=</span> mapper.writeValueAsString(student);</span><br><span class=\"line\">System.out.println(jsonStr);</span><br><span class=\"line\"> </span><br><span class=\"line\">结果：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;hyl&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;age&quot;</span> : <span class=\"number\">21</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;sendTime&quot;</span> : <span class=\"string\">&quot;2020-07-23 13:14:36&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;intList&quot;</span> : [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"（6）Object类型转list\"><a href=\"#（6）Object类型转list\" class=\"headerlink\" title=\"（6）Object类型转list\"></a>（6）Object类型转list</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ObjectMapper</span> <span class=\"variable\">objectMapper</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMapper</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> objectMapper.writeValueAsString(object); <span class=\"comment\">// object是Object类型</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> objectMapper.readValue(json, List.class);</span><br></pre></td></tr></table></figure>","categories":[{"name":"工作技能","path":"api/categories/工作技能.json"}],"tags":[{"name":"工作技能","path":"api/tags/工作技能.json"},{"name":"后端","path":"api/tags/后端.json"},{"name":"Java","path":"api/tags/Java.json"}]}